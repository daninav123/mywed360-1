{
  "generatedAt": "2025-12-17T03:42:03.513Z",
  "modules": [
    {
      "filePath": "docs/flujos-especificos/flujo-0-administracion-global.md",
      "title": "0. Administraci√≥n Global (estado 2025-10-14)",
      "implementedLines": [
        "autenticaci√≥n reforzada, panel operativo con m√©tricas en tiempo real, alertas de integraciones y gesti√≥n de tareas administrativas. La documentaci√≥n de detalle se encuentra en [docs/panel-admin/panel-admin.md](../panel-admin/panel-admin.md)."
      ],
      "pendingLines": [],
      "roadmapSection": "",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/admin/admin-flow.cy.js`: recorre login, panel principal, filtros y validaci√≥n de roles (owner, planner, soporte).",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/admin/admin-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "desconocido"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-1-registro-autenticacion.md",
      "title": "1. Registro y Autenticaci√≥n (estado 2025-10-08)",
      "implementedLines": [
        "`Signup.jsx`, `Login.jsx`, `ResetPassword.jsx`, `VerifyEmail.jsx`, `useAuth.jsx`, `SessionManager.jsx`, `src/context/UserContext.jsx`, componentes `SocialLoginButtons.jsx`, `RegisterForm.jsx`, `PasswordStrengthMeter.jsx`."
      ],
      "pendingLines": [
        "refactor de formularios legacy fuera de uso y auditor√≠a de accesibilidad manual sobre flows secundarios."
      ],
      "roadmapSection": "- Instrumentar m√©tricas (`signup_submit`, `social_signup`, `login_failed`, etc.) y revisar dashboards.\n\n- Completar auditor√≠a de accesibilidad y focus management en formularios y botones sociales.\n\n- Retirar formularios legacy (`RegisterForm`/`SocialLogin` antiguos) y limpiar dependencias en rutas no utilizadas.\n\n- 2025-10-08: `VerifyEmail`, `ResetPassword`, `CreateWeddingAI` y `GamificationPanel` usan el hook unificado (`useAuth`) y este expone `sendPasswordReset`.\n\n- Homogeneizar manejo de errores Firebase ‚Üí UI (mapa centralizado en `authErrorMapper`).",
      "checklistSection": "- Variables Firebase (`VITE_FIREBASE_*`, `FIREBASE_SERVICE_ACCOUNT_KEY`).\n\n- Configurar correo transactional (Mailgun) para reset/verify.\n\n- Alta de credenciales OAuth (Google, Facebook, etc.) en Firebase Console y `.env`.",
      "e2eSection": "- `cypress/e2e/auth/flow1-signup.cy.js`: cubre altas por correo, validaci√≥n de duplicados y redirecci√≥n a verificaci√≥n.\n- `cypress/e2e/auth/flow1-social-login.cy.js`: valida inicio de sesi√≥n con proveedores externos y manejo de errores comunes.\n- `cypress/e2e/auth/flow1-password-reset.cy.js`: ejecuta la solicitud y el completado del restablecimiento de contrase√±a.\n- `cypress/e2e/auth/flow1-verify-email.cy.js`: asegura reenv√≠o del correo y refresco del estado `emailVerified`.\n- `cypress/e2e/auth/auth-flow.cy.js`: smoke de rutas protegidas, sesi√≥n persistente y manipulaci√≥n de `remember me`.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/auth/flow1-signup.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/auth/flow1-social-login.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/auth/flow1-password-reset.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/auth/flow1-verify-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/auth/auth-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Signup.jsx",
          "basename": "Signup.jsx",
          "matches": [
            "apps/main-app/src/pages/Signup.jsx"
          ]
        },
        {
          "ref": "Login.jsx",
          "basename": "Login.jsx",
          "matches": [
            "apps/main-app/src/pages/Login.jsx"
          ]
        },
        {
          "ref": "ResetPassword.jsx",
          "basename": "ResetPassword.jsx",
          "matches": [
            "apps/main-app/src/pages/ResetPassword.jsx"
          ]
        },
        {
          "ref": "VerifyEmail.jsx",
          "basename": "VerifyEmail.jsx",
          "matches": [
            "apps/main-app/src/pages/VerifyEmail.jsx"
          ]
        },
        {
          "ref": "useAuth.jsx",
          "basename": "useAuth.jsx",
          "matches": [
            "apps/main-app/src/hooks/useAuth.jsx"
          ]
        },
        {
          "ref": "SessionManager.jsx",
          "basename": "SessionManager.jsx",
          "matches": [
            "apps/main-app/src/components/auth/SessionManager.jsx"
          ]
        },
        {
          "ref": "src/context/UserContext.jsx",
          "basename": "UserContext.jsx",
          "matches": [
            "apps/main-app/src/contexts/UserContext.jsx",
            "apps/main-app/src/context/UserContext.jsx"
          ]
        },
        {
          "ref": "SocialLoginButtons.jsx",
          "basename": "SocialLoginButtons.jsx",
          "matches": [
            "apps/main-app/src/components/auth/SocialLoginButtons.jsx"
          ]
        },
        {
          "ref": "RegisterForm.jsx",
          "basename": "RegisterForm.jsx",
          "matches": [
            "apps/main-app/src/components/auth/RegisterForm.jsx"
          ]
        },
        {
          "ref": "PasswordStrengthMeter.jsx",
          "basename": "PasswordStrengthMeter.jsx",
          "matches": [
            "apps/main-app/src/components/auth/PasswordStrengthMeter.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-10-gestion-bodas-multiples.md",
      "title": "10. Gesti√≥n de Bodas M√∫ltiples (estado 2025-10-16)",
      "implementedLines": [
        "Bodas.jsx, BodaDetalle.jsx, WeddingSelector.jsx, WeddingFormModal.jsx, useWedding context, seeding inicial (finanzas/tareas) al crear boda desde planner, componentes MultiWeddingSummary.jsx y WeddingPortfolioTable.jsx, tablero multi-boda con KPIs/filtros y encolado CRM (crmSyncQueue), y editor de permisos por m√≥dulo en BodaDetalle.jsx (modulePermissions)."
      ],
      "pendingLines": [
        "worker CRM (procesar crmSyncQueue), activity feed/alertas multi-boda y suites E2E espec√≠ficas para permisos/CRM."
      ],
      "roadmapSection": "- Worker CRM (procesamiento y reintentos), m√©tricas de sincronizaci√≥n y alertas multi-boda.\n- Activity feed con timeline consolidado y avisos en vivo.\n- Suites E2E espec√≠ficas para permisos por m√≥dulo y flujos CRM.",
      "checklistSection": "- Reglas Firestore para `weddings`, `users/{uid}` (permisos por rol).\n- Seeds y Cloud Functions idempotentes para nuevas bodas.\n- Validar UI con >10 bodas (scroll, selector).\n- QA de traducciones y copy en wizard.",
      "e2eSection": "- `cypress/e2e/weddings/multi-weddings-flow.cy.js`: valida la vista de bodas activas/archivadas usando datos del stub de Cypress, comprueba la persistencia del `activeWedding` y la disponibilidad del CTA para planners.\n- `cypress/e2e/weddings/wedding-team-flow.cy.js`: valida asignaci√≥n de roles/miembros y navegaci√≥n multi-boda.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/weddings/multi-weddings-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/weddings/wedding-team-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11-protocolo-ceremonias.md",
      "title": "11. Protocolo y Ceremonias (visi√≥n global)",
      "implementedLines": [],
      "pendingLines": [
        "integracion con registros civiles, generador de programas/QR, alertas en tiempo real y dashboard operativo para el dia B."
      ],
      "roadmapSection": "- Integraci√≥n con registros civiles y APIs p√∫blicas para validar documentaci√≥n autom√°ticamente.  \n- Generador de programas/QR a partir de momentos y timeline.  \n- Alertas inteligentes en tiempo real (retrasos, clima adverso, tareas cr√≠ticas).  \n- Dashboard operativo para planners el d√≠a del evento.\n\n> Consulta los enlaces 11A‚Äì11E para reglas de negocio, UX y pruebas espec√≠ficas de cada m√≥dulo.",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/protocolo/ceremony-tabs-flow.cy.js`: pendiente de actualizar; la navegaci√≥n entre subflujos se realiza ahora mediante rutas directas sin pesta√±as compartidas.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/ceremony-tabs-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11a-momentos-especiales.md",
      "title": "11A. Momentos Especiales de la Boda",
      "implementedLines": [],
      "pendingLines": [
        "campos avanzados (responsables, suppliers), drag&drop, alertas guiadas y destinatarios por momento."
      ],
      "roadmapSection": "- Campos adicionales (responsables, requisitos t√©cnicos, suppliers, estado) descritos originalmente.  \n- Reordenamiento drag&drop y l√≠mite de 200 momentos.  \n- Alertas por campos faltantes y duplicado/movimiento con UI guiada.  \n- Destinatario opcional por momento (selector colapsable que permite asociar invitados/roles concretos para integraciones como seating VIP).",
      "checklistSection": "- Verificar reglas Firestore de `specialMoments`.  \n- Asegurar traducciones (labels de bloques y placeholders).  \n- Mantener cat√°logo `MUSIC_INSPIRATION` actualizado y sin enlaces ca√≠dos.",
      "e2eSection": "- `cypress/e2e/protocolo/protocolo-flows.cy.js`: carga la vista con datos simulados de momentos especiales y valida que los bloques y canciones persistidos se renderizan correctamente.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/protocolo-flows.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11b-timeline-dia-b.md",
      "title": "11B. Timeline Global del D√≠a B",
      "implementedLines": [],
      "pendingLines": [
        "migrar la persistencia a subcolecci√≥n propia, exponer estado editable, habilitar drag&drop y alertas autom√°ticas."
      ],
      "roadmapSection": "- Mover la persistencia de `timing` a una subcolecci√≥n separada (`weddings/{id}/timing`).  \n- Editar el estado del bloque (on-time/slightly-delayed/delayed) desde la UI.  \n- Reordenamiento drag&drop, l√≠mites de 30 hitos y validaciones de coherencia horaria.  \n- Alertas autom√°ticas seg√∫n retraso.",
      "checklistSection": "- Asegurar reglas Firestore para `timing` y `ceremonyTimeline`.  \n- Revisar traducciones de estados y mensajes en UI.  \n- Validar que seeds carguen timeline demo (`scripts/seedTestDataForPlanner.js:266`).",
      "e2eSection": "- `cypress/e2e/protocolo/protocolo-flows.cy.js`: verifica que el timeline se inicializa con los bloques por defecto y que la interfaz permite a√±adir nuevos momentos.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/protocolo-flows.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11c-checklist-ultima-hora.md",
      "title": "11C. Checklist de √öltima Hora",
      "implementedLines": [],
      "pendingLines": [
        "alertas sonoras/push para requisitos criticos y sincronizacion con el centro de notificaciones."
      ],
      "roadmapSection": "- Alertas sonoras/notificaciones push para requisitos cr√≠ticos.  \n- Sincronizaci√≥n con centro de notificaciones.",
      "checklistSection": "- Reglas Firestore para `ceremonyChecklist`.  \n- Traducciones y etiquetas de categor√≠as (ES/EN/FR).  \n- Seeds actualizados (`scripts/seedTestDataForPlanner.js:352`) para mostrar ejemplo funcional.",
      "e2eSection": "- `cypress/e2e/protocolo/protocolo-flows.cy.js`: valida la checklist de √∫ltima hora mostrando checkpoints manuales simulados y la integraci√≥n con el resumen de m√∫sica.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/protocolo-flows.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11d-guia-documentacion-legal.md",
      "title": "11D. Gu√≠a de Documentaci√≥n Legal",
      "implementedLines": [],
      "pendingLines": [
        "ampliar el catalogo internacional, sincronizacion multiusuario y automatismos con la checklist legal."
      ],
      "roadmapSection": "- Tipos adicionales (simb√≥lica, destino) y m√°s pa√≠ses.  \n- Desplegar variaciones completas por pa√≠s: para cada combinaci√≥n `tipo de ceremonia √ó pa√≠s` se definen bloques (preparaci√≥n, obtenci√≥n, legalizaci√≥n), responsables, plazos sugeridos y alertas contextuales (ej. apostillas). La disposici√≥n se ajusta por jurisdicci√≥n sin depender de pesta√±as compartidas.\n- Selector de pa√≠s con memoria multiusuario: el pa√≠s asignado autom√°ticamente se almacena en `weddings/{id}/ceremony/legal.countryOrigin`, mientras que los overrides manuales se registran por usuario para evitar conflictos (`legalSettings/{uid}` con `preferredCountry` y timestamp).\n- Sincronizaci√≥n multiusuario (guardar progreso en Firestore) y notas por requisito.  \n- Instrumentaci√≥n (`ceremony_document_guide_opened`) y automatismos en checklist (marcar estado).\n- Cat√°logo global de requisitos mantenido en Firestore/Storage para cubrir certificados civiles, religiosos y especiales (ver secci√≥n de Datos y modelo).",
      "checklistSection": "- Revisar contenidos por pa√≠s y mantener enlaces actualizados.  \n- Verificar traducciones y formato de fechas.  \n- Confirmar que las plantillas existen en `docs/protocolo` y se exponen correctamente desde la UI.",
      "e2eSection": "- `cypress/e2e/protocolo/protocolo-flows.cy.js`: comprueba la carga de la gu√≠a de documentos legales y la disponibilidad del generador de PDFs en modo stub.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/protocolo-flows.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-11e-ayuda-textos-ceremonia.md",
      "title": "11E. Ayuda a Lecturas y Votos",
      "implementedLines": [],
      "pendingLines": [
        "ampliar tabs dedicadas, control de versiones, integraci√≥n IA y cobertura E2E para usuarios ayudantes."
      ],
      "roadmapSection": "- Tabs adicionales (votos, discursos) y plantillas espec√≠ficas por tipo.  \n- Tabs deben soportar experiencias segmentadas para cada miembro de la pareja (votos ella/√©l/elle) y para ayudantes.  \n- Campos extra: notas privadas, enlace directo a momentos de 11A, responsables asignados y tags de inspiraci√≥n.  \n- Control de versiones con historial consultable, duplicado, favoritos y exportaci√≥n (PDF/proyecci√≥n).  \n- Validaciones en cliente (t√≠tulo requerido, evitar duplicados, longitud m√≠nima) con surfaced feedback y recuperaci√≥n ante errores de red.  \n- Integraci√≥n IA (reescritura, tono) y publicaci√≥n autom√°tica en flujo 21.  \n- Validaci√≥n de permisos en backend y auditor√≠a detallada, incluyendo trazabilidad de qui√©n vio o edit√≥ cada texto.  \n- M√©tricas operativas en UI (duraci√≥n total de ceremonia, ratio de textos finalizados) y eventos adicionales para checklist 11C.  \n- Pruebas E2E dedicadas para usuarios ayudantes y miembros de la pareja cubriendo visibilidad, estados y vistas previas.",
      "checklistSection": "- Verificar reglas Firestore para `ceremonyTexts`.  \n- Revisar textos de muestra y traducciones.  \n- Validar permisos seg√∫n rol y auditor√≠a (`updatedBy`).",
      "e2eSection": "- `cypress/e2e/email/smart-composer.cy.js y cypress/e2e/email/ai-provider-email.cy.js`: cubren la generaci√≥n asistida de textos, reutilizada por el asistente de ceremonia.\n- Cobertura adicional pendiente para el flujo espec√≠fico de textos.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/email/smart-composer.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/ai-provider-email.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-12-notificaciones-configuracion.md",
      "title": "12. Notificaciones y Configuraci√≥n (estado 2025-10-07)",
      "implementedLines": [
        "`Notificaciones.jsx`, `NotificationPreferences.jsx`, `NotificationWatcher.jsx`, `NotificationCenter.jsx` (scaffold), servicios `notificationService.js`, `notificationPreferencesService.js`, rutas backend `/api/notification-preferences`."
      ],
      "pendingLines": [
        "automatizaciones avanzadas (AutomationRules UI), notificaciones push/SMS completas y centro de notificaciones final."
      ],
      "roadmapSection": "- Centro de notificaciones completo (agrupaciones, b√∫squeda).\n- Automation rules UI (if-this-then-that).\n- Integraci√≥n multi-canal (SMS/push con configuraci√≥n avanzada).\n- Panel de auditor√≠a y m√©tricas ( CTR, canal favorito/efectividad ).",
      "checklistSection": "- Reglas Firestore `notifications` y `notificationPreferences`.\n- Configurar Mailgun/Twilio/FCM; validar push en navegadores.\n- Revisar traducciones (todas las opciones en `NotificationSettings` y `NotificationPreferences`).",
      "e2eSection": "- `cypress/e2e/notifications/preferences-flow.cy.js`: prueba la edici√≥n de preferencias, canales disponibles y persistencia de configuraciones.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/notifications/preferences-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Notificaciones.jsx",
          "basename": "Notificaciones.jsx",
          "matches": [
            "apps/main-app/src/pages/Notificaciones.jsx"
          ]
        },
        {
          "ref": "NotificationPreferences.jsx",
          "basename": "NotificationPreferences.jsx",
          "matches": [
            "apps/main-app/src/pages/NotificationPreferences.jsx"
          ]
        },
        {
          "ref": "NotificationWatcher.jsx",
          "basename": "NotificationWatcher.jsx",
          "matches": [
            "apps/main-app/src/components/notifications/NotificationWatcher.jsx"
          ]
        },
        {
          "ref": "NotificationCenter.jsx",
          "basename": "NotificationCenter.jsx",
          "matches": [
            "apps/main-app/src/components/NotificationCenter.jsx",
            "apps/main-app/src/components/notifications/NotificationCenter.jsx"
          ]
        },
        {
          "ref": "notificationService.js",
          "basename": "notificationService.js",
          "matches": [
            "backend/services/notificationService.js",
            "apps/main-app/src/services/notificationService.js"
          ]
        },
        {
          "ref": "notificationPreferencesService.js",
          "basename": "notificationPreferencesService.js",
          "matches": [
            "apps/main-app/src/services/notificationPreferencesService.js"
          ]
        },
        {
          "ref": "/api/notification-preferences",
          "basename": "notification-preferences",
          "matches": [
            "backend/routes/notification-preferences.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-14-checklist-avanzado.md",
      "title": "14. Checklist Avanzado (estado 2025-10-07)",
      "implementedLines": [
        "`Checklist.jsx`, `Tasks.jsx`, `TaskSidePanel.jsx`, hook `useWeddingTasksHierarchy`, servicios `automationService.js` (basico)."
      ],
      "pendingLines": [
        "generacion inteligente de checklists, dependencias avanzadas, gamificacion completa y plantillas compartidas por comunidad."
      ],
      "roadmapSection": "- Motor de recomendaciones IA que genere checklist dinamico segun perfil de boda.\n- Editor de plantillas colaborativas y marketplace de workflows.\n- Dependencias visuales (gantt, grafo) y pronostico de riesgo.\n- Gamificacion completa (streaks, objetivos semanales, recompensas).\n- Sync bidireccional con calendarios externos (Google/Microsoft).",
      "checklistSection": "- Reglas Firestore para `tasks`, `checklist`, `taskTemplates`, `checklistStats` y preparaci√≥n para `taskAutomations`.\n- Revisar limites de escritura masiva (batch) en seeds y automatizaciones.\n- Configurar notificaciones (`MAILGUN_*`, `PUSH_PROVIDER`) para recordatorios.\n- Actualizar traducciones y onboarding segun nuevas plantillas.",
      "e2eSection": "- `cypress/e2e/tasks/all_subtasks_modal.cy.js`: verifica la gesti√≥n de checklist avanzado, subtareas y estados.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/tasks/all_subtasks_modal.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Checklist.jsx",
          "basename": "Checklist.jsx",
          "matches": [
            "apps/main-app/src/pages/Checklist.jsx",
            "apps/main-app/src/pages/protocolo/Checklist.jsx"
          ]
        },
        {
          "ref": "Tasks.jsx",
          "basename": "Tasks.jsx",
          "matches": [
            "apps/main-app/src/pages/Tasks.css",
            "apps/main-app/src/pages/Tasks.jsx",
            "apps/main-app/src/i18n/locales/tr/tasks.json",
            "apps/main-app/src/i18n/locales/sv/tasks.json",
            "apps/main-app/src/i18n/locales/sl/tasks.json",
            "apps/main-app/src/i18n/locales/sk/tasks.json",
            "apps/main-app/src/i18n/locales/ru/tasks.json",
            "apps/main-app/src/i18n/locales/ro/tasks.json",
            "apps/main-app/src/i18n/locales/pt/tasks.json",
            "apps/main-app/src/i18n/locales/pl/tasks.json",
            "apps/main-app/src/i18n/locales/no/tasks.json",
            "apps/main-app/src/i18n/locales/nl/tasks.json",
            "apps/main-app/src/i18n/locales/mt/tasks.json",
            "apps/main-app/src/i18n/locales/lv/tasks.json",
            "apps/main-app/src/i18n/locales/lt/tasks.json",
            "apps/main-app/src/i18n/locales/it/tasks.json",
            "apps/main-app/src/i18n/locales/is/tasks.json",
            "apps/main-app/src/i18n/locales/hu/tasks.json",
            "apps/main-app/src/i18n/locales/hr/tasks.json",
            "apps/main-app/src/i18n/locales/fr-CA/tasks.json",
            "apps/main-app/src/i18n/locales/fr/tasks.json",
            "apps/main-app/src/i18n/locales/fi/tasks.json",
            "apps/main-app/src/i18n/locales/eu/tasks.json",
            "apps/main-app/src/i18n/locales/et/tasks.json",
            "apps/main-app/src/i18n/locales/es-MX/tasks.json",
            "apps/main-app/src/i18n/locales/es-AR/tasks.json",
            "apps/main-app/src/i18n/locales/es/tasks.json",
            "apps/main-app/src/i18n/locales/en/tasks.json",
            "apps/main-app/src/i18n/locales/el/tasks.json",
            "apps/main-app/src/i18n/locales/de/tasks.json",
            "apps/main-app/src/i18n/locales/da/tasks.json",
            "apps/main-app/src/i18n/locales/cs/tasks.json",
            "apps/main-app/src/i18n/locales/ca/tasks.json",
            "apps/main-app/src/i18n/locales/bg/tasks.json",
            "apps/main-app/src/i18n/locales/ar/tasks.json"
          ]
        },
        {
          "ref": "TaskSidePanel.jsx",
          "basename": "TaskSidePanel.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskSidePanel.jsx"
          ]
        },
        {
          "ref": "useWeddingTasksHierarchy",
          "basename": "useWeddingTasksHierarchy",
          "matches": [
            "apps/main-app/src/hooks/useWeddingTasksHierarchy.js"
          ]
        },
        {
          "ref": "automationService.js",
          "basename": "automationService.js",
          "matches": [
            "backend/services/automationService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-15-contratos-documentos.md",
      "title": "15. Contratos y Documentos (estado 2025-10-07)",
      "implementedLines": [
        "`Contratos.jsx` (CRUD y modales integrados), dataset `contractTemplates.js`, servicios `SignatureService.js` (stub), `storageUploadService.js` para adjuntos y hooks `useFirestoreCollection` + `useProveedores` para wiring con proveedores."
      ],
      "pendingLines": [
        "firma digital integrada (DocuSign/HelloSign), workflows de aprobacion, analitica legal y compliance automatizado."
      ],
      "roadmapSection": "- Integracion completa con proveedores de firma digital y verificacion de identidad.\n- Analitica de clausulas (riesgos, montos, vencimientos) con IA.\n- Workflows dinamicos segun tipo de contrato y jurisdiccion.\n- Portal colaborativo para proveedores con comentarios y adjuntos.\n- Archivado inteligente y retencion automatica segun politicas legales.",
      "checklistSection": "- Reglas Firestore para `documents`, `documentWorkflows`, `documentTemplates`, `signatureLogs`.\n- Configurar almacenamiento seguro (Cloud Storage) con buckets separados y KMS.\n- Variables de firma (`DOCUSIGN_*`, `HELLOSIGN_*`) y webhooks configuradas antes de activar.\n- Revisar plantillas por region y mantener repositorio de versiones legales.",
      "e2eSection": "- `cypress/e2e/contracts/contracts-flow.cy.js`: cubre creaci√≥n, firma simulada y seguimiento de contratos.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/contracts/contracts-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Contratos.jsx",
          "basename": "Contratos.jsx",
          "matches": [
            "apps/main-app/src/pages/Contratos.jsx"
          ]
        },
        {
          "ref": "contractTemplates.js",
          "basename": "contractTemplates.js",
          "matches": [
            "apps/main-app/src/data/templates/contractTemplates.js"
          ]
        },
        {
          "ref": "SignatureService.js",
          "basename": "SignatureService.js",
          "matches": [
            "backend/services/signatureService.js",
            "apps/main-app/src/services/SignatureService.js"
          ]
        },
        {
          "ref": "storageUploadService.js",
          "basename": "storageUploadService.js",
          "matches": [
            "apps/main-app/src/services/storageUploadService.js"
          ]
        },
        {
          "ref": "useFirestoreCollection",
          "basename": "useFirestoreCollection",
          "matches": [
            "apps/main-app/src/hooks/useFirestoreCollection.js"
          ]
        },
        {
          "ref": "useProveedores",
          "basename": "useProveedores",
          "matches": [
            "apps/main-app/src/hooks/useProveedores.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-16-asistente-virtual-ia.md",
      "title": "16. Asistente Virtual y Automatizaciones IA (estado 2025-10-07)",
      "implementedLines": [],
      "pendingLines": [
        "habilitar backend multicanal, reglas configurables, workers dedicados y cobertura E2E especifica."
      ],
      "roadmapSection": "- **Orquestador multicanal** (`AutomationOrchestrator`): ingerir emails, chats, WhatsApp y decidir acciones.\n- **Reglas configurables**: panel para if/then (ej. ‚Äúsi proveedor responde con presupuesto > X ‚Üí crear tarea‚Äù).\n- **Workers**: procesar colas (`automationLogs`, `automationRules`) sin depender del cliente.\n- **Auditor√≠a**: panel `/automation` con historiales, posibilidad de revertir acciones y m√©tricas (ratio automatizaci√≥n, reversi√≥n, latencias).\n- **Integraci√≥n con flujos**: generaci√≥n autom√°tica de tareas (flujo 14), actualizaciones de proveedores (flujo 5), avisos en notificaciones (flujo 12).\n\nCuando estas piezas est√©n listas, se documentar√°n de nuevo (ver antiguo flujo 24 como referencia de visi√≥n).",
      "checklistSection": "- Clave `OPENAI_API_KEY` solo si el backend `/api/ai/parse-dialog` (con fallback local contextual) est√° habilitado.\n- Revisar pol√≠ticas de almacenamiento local (GDPR) y permitir al usuario limpiar historial.\n- En entornos productivos, habilitar tracking de eventos antes de lanzar automatizaciones reales.",
      "e2eSection": "- `cypress/e2e/email/ai-provider-email.cy.js y cypress/e2e/email/smart-composer.cy.js`: ejercitan respuestas sugeridas por IA y generaci√≥n de contenido que reutiliza el asistente virtual.\n- `cypress/e2e/assistant/chat-fallback-context.cy.js`: fuerza fallback offline y verifica que el copy incluya datos del evento activo (tipo, estilo, ubicaci√≥n).\n- Cobertura e2e dedicada al asistente general pendiente.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/email/ai-provider-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/smart-composer.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/assistant/chat-fallback-context.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-17-gamificacion-progreso.md",
      "title": "17. Gamificacion y Progreso (estado 2025-10-13)",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "- Disenar integraciones discretas (badges en lista de tareas, indicadores en timeline) sin recurrir a paneles grandes.\n- Definir programa de recompensas intercambiables consumiendo los datos existentes.\n- Preparar comunicacion a usuarios cuando exista alguna visualizacion ligera o beneficio tangible.\n- Analitica avanzada y segmentacion para marketing se mantiene como trabajo futuro.",
      "checklistSection": "- Reglas de seguridad para colecciones `gamification`, `achievements`, `gamificationEvents`.\n- Limites de escritura y throttling en funciones Cloud/Firestore.\n- Documentar contratos de API para consumidores internos.\n- Configurar alertas y monitoreo de logs.",
      "e2eSection": "- `cypress/e2e/gamification/gamification-progress-happy.cy.js`: smoke de progreso positivo (award + stats + events).\n- `cypress/e2e/gamification/gamification-milestone-unlock.cy.js`: cubre lectura de logros y esquema esperado.\n- `cypress/e2e/gamification/gamification-history.cy.js`: garantiza que Home no renderiza paneles ni dispara peticiones autom√°ticas a la API.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/gamification/gamification-progress-happy.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/gamification/gamification-milestone-unlock.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/gamification/gamification-history.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-18-generador-documentos-legales.md",
      "title": "18. Generador de Documentos Legales (estado 2025-10-07)",
      "implementedLines": [
        "formulario `DocumentosLegales.jsx` (consentimiento de uso de imagen) que genera un PDF local con jsPDF."
      ],
      "pendingLines": [
        "repositorio completo de plantillas, firma electr√≥nica, almacenamiento backend y automatizaci√≥n IA."
      ],
      "roadmapSection": "",
      "checklistSection": "- Verificar compatibilidad jsPDF en navegadores soportados.\n- Proveer plantillas actualizadas en cuanto haya repositorio legal.\n- Revisar textos y traducciones.",
      "e2eSection": "- `cypress/e2e/protocolo/legal-docs-generator.cy.js`: smoke del generador de documentos con PDF local.\n- `cypress/e2e/protocolo/legal-docs-validation.cy.js`: cubre validaciones del formulario antes de generar el documento.\n- `cypress/e2e/protocolo/legal-docs-versioning.cy.js`: verifica versionado, historial y descarga posterior.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/protocolo/legal-docs-generator.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/protocolo/legal-docs-validation.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/protocolo/legal-docs-versioning.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "DocumentosLegales.jsx",
          "basename": "DocumentosLegales.jsx",
          "matches": [
            "apps/main-app/src/pages/DocumentosLegales.jsx",
            "apps/main-app/src/pages/protocolo/DocumentosLegales.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-19-diseno-invitaciones.md",
      "title": "19. Diseno de Invitaciones (estado 2025-10-07)",
      "implementedLines": [
        "`InvitationDesigner.jsx`, `MisDisenos.jsx`, `VectorEditor.jsx`, `MenuCatering.jsx`, `PapelesNombres.jsx`, utils `pdfExport.js` y biblioteca de plantillas."
      ],
      "pendingLines": [
        "tutoriales guiados, colaboracion/feedback, integracion con proveedores de impresion y generacion IA."
      ],
      "roadmapSection": "- Editor colaborativo con comentarios y versionado.\n- Generacion IA de propuestas a partir del perfil de la boda.\n- Integracion con proveedores (impresion/envio) y tracking.\n- Biblioteca de tutoriales y guias de estilo interactivas.\n- Marketplace de plantillas premium.",
      "checklistSection": "- Reglas Firestore para `designs`, `designActivity`, `designTemplates`, `designErrors`.\n- Configurar limites de upload y validaciones en Cloud Storage.\n- Revisar fuentes licenciadas y paquetes de iconos.\n- Actualizar portada/template default por temporada.\n- Preparar prototipo de la UI ‚ÄúConfiguraci√≥n de pieza‚Äù en Figma siguiendo `docs/diseno/flujo-19-panel-configuracion-figma.md` y dejar enlace para revisi√≥n.",
      "e2eSection": "- `cypress/e2e/invitaciones_rsvp.cy.js`: recorre la creaci√≥n y env√≠o de invitaciones digitales vinculadas a RSVP.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/invitaciones_rsvp.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "InvitationDesigner.jsx",
          "basename": "InvitationDesigner.jsx",
          "matches": [
            "apps/main-app/src/pages/InvitationDesigner.jsx"
          ]
        },
        {
          "ref": "MisDisenos.jsx",
          "basename": "MisDisenos.jsx",
          "matches": [
            "apps/main-app/src/pages/disenos/MisDisenos.jsx"
          ]
        },
        {
          "ref": "VectorEditor.jsx",
          "basename": "VectorEditor.jsx",
          "matches": [
            "apps/main-app/src/pages/disenos/VectorEditor.jsx",
            "apps/main-app/src/components/VectorEditor.jsx"
          ]
        },
        {
          "ref": "MenuCatering.jsx",
          "basename": "MenuCatering.jsx",
          "matches": [
            "apps/main-app/src/pages/disenos/MenuCatering.jsx"
          ]
        },
        {
          "ref": "PapelesNombres.jsx",
          "basename": "PapelesNombres.jsx",
          "matches": [
            "apps/main-app/src/pages/disenos/PapelesNombres.jsx"
          ]
        },
        {
          "ref": "pdfExport.js",
          "basename": "pdfExport.js",
          "matches": [
            "apps/main-app/src/utils/pdfExport.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-2-creacion-boda-ia.md",
      "title": "2. Creaci√≥n de Evento con IA (bodas y eventos afines) ¬∑ estado 2025-10-08",
      "implementedLines": [
        "`src/pages/CreateWeddingAI.jsx` (wizard dos pasos), `src/pages/AyudaCeremonia.jsx` (copy din√°mico), `src/pages/BodaDetalle.jsx` (perfil de evento), `src/context/WeddingContext.jsx`, servicios en `src/services/WeddingService.js` (createWedding, seedDefaultTasksForWedding), cat√°logo `src/config/eventStyles.js`."
      ],
      "pendingLines": [
        "habilitar opt-in a planner desde Perfil, paneles/alertas para la telemetr√≠a del funnel, refactor de rutas `/bodas`‚Üí`/eventos`, integraci√≥n IA contextual y despliegue del flujo multi-evento para planners."
      ],
      "roadmapSection": "- Implementar opt-in a planner/assistant desde Perfil con flujo dedicado.\n- Refactorizar rutas y componentes (`/bodas` ‚Üí `/eventos`) cuando exista soporte multi-evento en toda la app.\n- Conectar telemetr√≠a con dashboards de adopci√≥n segmentados por `eventType` y alertas de funnel.\n- ‚úÖ 2025-10-13: Asistencia IA contextual con prompts por tipo de evento y fallback offline en ChatWidget.\n- ‚úÖ 2025-10-08: Wizard multi-evento, servicios y pantallas asociados actualizados para `eventType/eventProfile`.\n- ‚úÖ 2025-10-08: Cat√°logo de estilos centralizado y copy adaptable (`Boda`/`Evento`).\n- üö´ 2025-10-13: CTA ¬´Crear nuevo evento¬ª retirado del header y del men√∫ contextual; ambos deben permanecer sin bot√≥n y mantenerse el selector multi-evento habilitado para owners.",
      "checklistSection": "- Reglas Firestore: permitir escritura de `eventType`, `eventProfile`, `eventProfileSummary` y nuevos campos en `_seed_meta`.\n- Script `scripts/migrate-event-profile.js` para etiquetar eventos legacy con `eventType: 'boda'` y generar `eventProfileSummary` b√°sico antes del switch.\n  1. Obtener credenciales (`serviceAccount.json`) y ejecutar: `node scripts/migrate-event-profile.js --credentials path/to/serviceAccount.json`.\n  2. Verificar en staging que `weddings/{id}` contiene `eventType/eventProfile` normalizados y que cada `users/{uid}/weddings/{id}` refleja `eventProfileSummary`.\n  3. Revisar logs de consola (totales migrados) y auditar uno o dos documentos en la consola de Firestore antes de seguir a producci√≥n.\n- Revisi√≥n de copy/traducciones (`Crear boda`, `Crear evento`) y estilos centralizados (`config/eventStyles.js`).\n- Telemetr√≠a: preparar dashboard funnel + ratio adopci√≥n Paso 2.\n- QA: actualizar suites Cypress/E2E con los casos anteriores.",
      "e2eSection": "- `cypress/e2e/onboarding/create-event-flow.cy.js`: recorre ambos pasos del wizard multi-evento, valida persistencia de datos entre pasos y el copy condicional seg√∫n tipo de evento.\n- `cypress/e2e/onboarding/create-event-cta.cy.js`: asegura que el CTA ¬´Crear nuevo evento¬ª no aparece ni en la cabecera ni en el men√∫ contextual.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/onboarding/create-event-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/onboarding/create-event-cta.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "src/pages/CreateWeddingAI.jsx",
          "basename": "CreateWeddingAI.jsx",
          "matches": [
            "apps/main-app/src/pages/CreateWeddingAI.jsx"
          ]
        },
        {
          "ref": "src/pages/AyudaCeremonia.jsx",
          "basename": "AyudaCeremonia.jsx",
          "matches": [
            "apps/main-app/src/pages/AyudaCeremonia.jsx",
            "apps/main-app/src/pages/protocolo/AyudaCeremonia.jsx"
          ]
        },
        {
          "ref": "src/pages/BodaDetalle.jsx",
          "basename": "BodaDetalle.jsx",
          "matches": [
            "apps/main-app/src/pages/BodaDetalle.jsx"
          ]
        },
        {
          "ref": "src/context/WeddingContext.jsx",
          "basename": "WeddingContext.jsx",
          "matches": [
            "apps/main-app/src/context/WeddingContext.jsx"
          ]
        },
        {
          "ref": "src/services/WeddingService.js",
          "basename": "WeddingService.js",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        },
        {
          "ref": "src/config/eventStyles.js",
          "basename": "eventStyles.js",
          "matches": [
            "apps/main-app/src/config/eventStyles.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-2-descubrimiento-personalizado.md",
      "title": "2. Descubrimiento Personalizado de la Boda",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/onboarding/discovery-personalized.cy.js`: recorre el flujo de onboarding personalizado y confirma persistencia del perfil.\n- `cypress/e2e/onboarding/onboarding-mode-selector.cy.js`: valida selecci√≥n de modo (wizard vs. asistente) y rutas resultantes.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/onboarding/discovery-personalized.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/onboarding/onboarding-mode-selector.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "desconocido"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-20-email-inbox.md",
      "title": "20. Buzon Interno y Estadisticas (estado 2025-10-07)",
      "implementedLines": [
        "`Buzon_fixed_complete.jsx` (legacy), `EmailInbox.jsx`, `EmailStatistics.jsx`, componentes `UnifiedInbox/InboxContainer.jsx`, `EmailComposer.jsx`, `EmailSetupForm.jsx`."
      ],
      "pendingLines": [
        "consolidar experiencia unica, documentar APIs backend, onboarding centralizado y telemetry completa."
      ],
      "roadmapSection": "- Unificar experiencia (retirar `Buzon_fixed_complete` una vez completado).\n- Automatizaciones (drip campaigns, journeys multicanal) y IA de respuesta.\n- Estadisticas avanzadas con comparativas por segmento.\n- Plantillas compartidas y biblioteca colaborativa.\n- Integracion con WhatsApp/Push para comunicaciones omnicanal.",
      "checklistSection": "- Reglas Firestore para `emails`, `emailSettings`, `emailTemplates`.\n- Configurar webhooks en Mailgun/SMTP y credenciales seguras.\n- Revisar limites y politicas anti-spam (DKIM, SPF, DMARC).\n- Plan de migracion desde buz√≥n legacy con backups.",
      "e2eSection": "- `cypress/e2e/email_inbox_smoke.cy.js`: smoke general de bandeja, sincronizaci√≥n y navegaci√≥n.\n- `cypress/e2e/email/read-email.cy.js y cypress/e2e/email/send-email.cy.js`: cubren lectura, respuestas y reenv√≠o.\n- `cypress/e2e/email/folders-management.cy.js y cypress/e2e/email/tags-filters.cy.js`: validan organizaci√≥n avanzada, carpetas y filtros.\n- `cypress/e2e/compose_quick_replies.cy.js y cypress/e2e/email/smart-composer.cy.js`: prueban asistentes y respuestas r√°pidas integrados en la bandeja.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/email_inbox_smoke.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/send-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/folders-management.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/tags-filters.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/compose_quick_replies.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/smart-composer.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Buzon_fixed_complete.jsx",
          "basename": "Buzon_fixed_complete.jsx",
          "matches": [
            "apps/main-app/src/pages/Buzon_fixed_complete.jsx"
          ]
        },
        {
          "ref": "EmailInbox.jsx",
          "basename": "EmailInbox.jsx",
          "matches": [
            "apps/main-app/src/pages/user/EmailInbox.jsx",
            "apps/main-app/src/components/email/EmailInbox.jsx"
          ]
        },
        {
          "ref": "EmailStatistics.jsx",
          "basename": "EmailStatistics.jsx",
          "matches": [
            "apps/main-app/src/pages/user/EmailStatistics.jsx"
          ]
        },
        {
          "ref": "UnifiedInbox/InboxContainer.jsx",
          "basename": "InboxContainer.jsx",
          "matches": [
            "apps/main-app/src/components/email/UnifiedInbox/InboxContainer.jsx"
          ]
        },
        {
          "ref": "EmailComposer.jsx",
          "basename": "EmailComposer.jsx",
          "matches": [
            "apps/main-app/src/components/email/EmailComposer.jsx"
          ]
        },
        {
          "ref": "EmailSetupForm.jsx",
          "basename": "EmailSetupForm.jsx",
          "matches": [
            "apps/main-app/src/components/email/EmailSetupForm.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-21-sitio-publico.md",
      "title": "21. Sitio P√∫blico (estado 2025-10-07)",
      "implementedLines": [
        "`WeddingSite.jsx`, `PublicWedding.jsx`, art√≠culos auxiliares (`SeatingPlanPost.jsx`, `MomentosEspecialesSimple.jsx`), integraci√≥n con `websiteService` y contenido Firestore."
      ],
      "pendingLines": [
        "personalizaci√≥n avanzada desde panel, dominios personalizados, SEO/analytics y medici√≥n de conversi√≥n."
      ],
      "roadmapSection": "- Editor dedicado en panel con vista previa y control de secciones.\n- Dominios personalizados y configuracion automatica de SSL.\n- Analytics en tiempo real y panel de conversion.\n- Integracion con comentarios/libro de visitas.\n- Experiencia para bodas multiples (selector en header publico).",
      "checklistSection": "- Reglas Firestore para `publicSites`, `publicSiteAnalytics`.\n- Configurar CDN/hosting estatico y invalidacion tras cada publicacion.\n- Revisar cumplimiento legal (cookies, privacidad) y agregar banner si aplica.\n- Preparar redireccion 404/410 para bodas archivadas.",
      "e2eSection": "- `cypress/e2e/inspiration/inspiration-flow.cy.js y cypress/e2e/inspiration_smoke.cy.js`: validan la navegaci√≥n p√∫blica de inspiraci√≥n y bloques reutilizados en el sitio.\n- `cypress/e2e/news/news-flow.cy.js`: cubre la secci√≥n de noticias/blog asociada al sitio p√∫blico.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/inspiration/inspiration-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/inspiration_smoke.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/news/news-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "WeddingSite.jsx",
          "basename": "WeddingSite.jsx",
          "matches": [
            "apps/main-app/src/pages/WeddingSite.jsx"
          ]
        },
        {
          "ref": "PublicWedding.jsx",
          "basename": "PublicWedding.jsx",
          "matches": [
            "apps/main-app/src/pages/PublicWedding.jsx"
          ]
        },
        {
          "ref": "SeatingPlanPost.jsx",
          "basename": "SeatingPlanPost.jsx",
          "matches": [
            "apps/main-app/src/pages/disenos/SeatingPlanPost.jsx"
          ]
        },
        {
          "ref": "MomentosEspecialesSimple.jsx",
          "basename": "MomentosEspecialesSimple.jsx",
          "matches": [
            "apps/main-app/src/pages/protocolo/MomentosEspecialesSimple.jsx"
          ]
        },
        {
          "ref": "websiteService",
          "basename": "websiteService",
          "matches": [
            "apps/main-app/src/services/websiteService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-22-dashboard-navegacion.md",
      "title": "22. Navegaci√≥n y Panel General (estado 2025-10-07)",
      "implementedLines": [
        "`HomeUser.jsx`, `Dashboard.jsx`, `More.jsx`, `Perfil.jsx`, widgets `WidgetContent.jsx`, utilidades de diagn√≥stico (`DevEnsureFinance.jsx`, `DevSeedGuests.jsx`)."
      ],
      "pendingLines": [
        "unificar dashboard con m√©tricas en vivo, proteger herramientas internas y agregar actividad reciente + estado de sincronizaci√≥n."
      ],
      "roadmapSection": "- Dashboard modular con edicion drag-and-drop y biblioteca de widgets.\n- Activity feed en tiempo real con filtros.\n- Buscador global y comandos r√°pidos.\n- Integracion con analytics para recomendaciones personalizadas.\n- Panel de salud del sistema (sincronizaci√≥n, errores recientes).",
      "checklistSection": "- Reglas Firestore para `dashboardConfig`, `activityFeed` (cuando se publique).\n- Asegurar que herramientas dev esten desactivadas en produccion (`VITE_ENV` check).\n- Revisar copy, links de soporte y recursos externos.\n- Probar skeleton/loading states con datos grandes.",
      "e2eSection": "- No hay pruebas end-to-end espec√≠ficas implementadas para este flujo.",
      "e2eChecks": [],
      "implChecks": [
        {
          "ref": "HomeUser.jsx",
          "basename": "HomeUser.jsx",
          "matches": [
            "apps/main-app/src/pages/HomeUser.jsx"
          ]
        },
        {
          "ref": "Dashboard.jsx",
          "basename": "Dashboard.jsx",
          "matches": [
            "apps/main-app/src/pages/Dashboard.jsx",
            "apps/main-app/src/components/dashboard/Dashboard.jsx"
          ]
        },
        {
          "ref": "More.jsx",
          "basename": "More.jsx",
          "matches": [
            "apps/main-app/src/pages/More.jsx"
          ]
        },
        {
          "ref": "Perfil.jsx",
          "basename": "Perfil.jsx",
          "matches": [
            "apps/main-app/src/pages/Perfil.jsx"
          ]
        },
        {
          "ref": "WidgetContent.jsx",
          "basename": "WidgetContent.jsx",
          "matches": [
            "apps/main-app/src/components/dashboard/WidgetContent.jsx"
          ]
        },
        {
          "ref": "DevEnsureFinance.jsx",
          "basename": "DevEnsureFinance.jsx",
          "matches": [
            "apps/main-app/src/pages/DevEnsureFinance.jsx"
          ]
        },
        {
          "ref": "DevSeedGuests.jsx",
          "basename": "DevSeedGuests.jsx",
          "matches": [
            "apps/main-app/src/pages/DevSeedGuests.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-23-metricas-proyecto.md",
      "title": "23. Metricas del Proyecto (estado 2025-10-14)",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "",
      "checklistSection": "- Backend: exponer `/api/project-metrics` (GET agregados, POST ingest) protegido por roles (owner, planner, admin, soporte) y habilitar `metricAggregatorWorker` en cron. Ver plan detallado en `docs/panel-admin/metricAggregatorWorker-plan.md`.\n- Configurar `VITE_METRICS_ENDPOINT` y variables adicionales (`VITE_ENABLE_EMAIL_ANALYZE`, `VITE_ENABLE_FINANCE_ALERTS`, `MAILGUN_*`, `VITE_BANK_API_*`) para garantizar fuentes completas.\n- Verificar reglas de seguridad para colecciones citadas (emailMetrics, finance, gamification, analytics/websiteEvents, publicSites, tasks, contracts, inspirationWall, blogCache).\n- Asegurar que `performanceMonitor.setUserContext` se invoca desde `useAuth` y `WeddingContext` antes de habilitar reportes multiusuario.\n- Documentar en runbook la respuesta a fallos de ingest (reintentos, colas pendientes, mute de alertas).",
      "e2eSection": "- `cypress/e2e/performance/email-performance.cy.js`: smoke de captura y visualizacion de metricas de comunicacion.\n- `cypress/e2e/finance/finance-analytics.cy.js`: valida panel financiero y agregados que alimentaran el dashboard global.\n- `cypress/e2e/gamification/gamification-history.cy.js`: confirma ausencia de panel visible y consistencia de endpoints antes de exponer contadores.\n- `cypress/e2e/budget_flow.cy.js` y `cypress/e2e/finance/finance-flow-full.cy.js`: ejercitan eventos `budget_*` y alertas usadas por el dashboard.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/performance/email-performance.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-analytics.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/gamification/gamification-history.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/budget_flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-flow-full.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "desconocido"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-24-galeria-inspiracion.md",
      "title": "24. Inspiracion Visual Unificada (estado 2025-10-12)",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "- Motor de recomendaciones con IA (clustering por preferencias, estacionalidad y etapa de boda).\n- Colecciones tematicas automatizadas y moodboard descargable/PDF.\n- Modo offline con cache en IndexedDB/service workers.\n- Favoritos colaborativos entre miembros del equipo y notificaciones proactivas.\n- Mejora de accesibilidad: focus trap completo, soporte de teclado en lightbox, announcements ARIA.",
      "checklistSection": "- Verificar llaves/API keys para `wallService` y cuotas de peticiones.\n- Ajustar reglas Firestore para `favorites` e `inspirationInteractions`.\n- Migrar colecciones legacy (`ideasPhotos` en `users/{uid}`) al nuevo esquema `weddings/{id}/inspiration/favorites` asegurando que planners/assistants vean la misma lista.\n- Asegurar headers de imagenes externas (`referrerPolicy`, `Cache-Control`).\n- Revisar traducciones en `i18n/locales/*/common.json` para etiquetas dinamicas.\n- Configurar dashboards de latencia/errores tanto del feed como del guardado de favoritos.",
      "e2eSection": "- `cypress/e2e/inspiration/inspiration-gallery.cy.js`: asegura filtros por categor√≠a, scroll infinito y render del grid principal.\n- `cypress/e2e/inspiration/inspiration-home-gallery.cy.js`: valida el carrusel de la home y enlaces hacia `/inspiracion`.\n- `cypress/e2e/inspiration/inspiration-save-board.cy.js`: cubre favoritos, sincronizaci√≥n y vista dedicada de guardados.\n- `cypress/e2e/inspiration/inspiration-share.cy.js`: verifica acciones de compartir/copiar enlace con feedback al usuario.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/inspiration/inspiration-gallery.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/inspiration/inspiration-home-gallery.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/inspiration/inspiration-save-board.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/inspiration/inspiration-share.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-25-suscripciones.md",
      "title": "25. Planes y Suscripciones (estado 2025-10-13)",
      "implementedLines": [
        "documentaci√≥n estrat√©gica inicial y cat√°logo de planes en `docs/planes-suscripcion.md`."
      ],
      "pendingLines": [
        "implementaci√≥n t√©cnica del cobro √∫nico por boda, automatizaciones de upgrade/downgrade, telemetr√≠a operativa y paneles de rentabilidad."
      ],
      "roadmapSection": "- Validar con stakeholders la propuesta de valor y l√≠mites concretos por plan.\n- Mapear el journey completo en herramientas (Miro/Lucidchart) con responsables y SLA por boda.\n- Construir dashboard de m√©tricas (upgrades, ticket medio, ratio Premium Plus) integrado con CRM y pasarela.\n- Dise√±ar y testear journeys autom√°ticos (alta, upgrade, rescate post-abandono) antes del lanzamiento.\n- Definir estrategia de retenci√≥n post-boda y cross-sell hacia nuevas bodas o planners.\n- Consolidar automatizaciones de rescate (downgrade, reintentos, ofertas personalizadas).",
      "checklistSection": "- Configurar claves de pasarela (`STRIPE_SECRET`, `STRIPE_WEBHOOK_SECRET`) y variables `VITE_DEFAULT_PLAN`.\n- Asegurar reglas Firestore para `weddings/{id}/subscription`, `users/{uid}/weddingPlans` y `subscriptionInvoices`.\n- Registrar dominios y webhooks en pasarela de pago (staging/producci√≥n).\n- Sembrar seeds para QA (`scripts/seedSubscriptions.js`) con bodas en cada plan.\n- Documentar FAQ y material de soporte para cada nivel.\n- Ejecutar `scripts/aggregateRoadmap.js` tras cambios de flujo para sincronizar ROADMAP/TODO.",
      "e2eSection": "- `cypress/e2e/subscriptions/subscription-flow.cy.js`: recorre upgrade/downgrade de planes y validaciones principales.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/subscriptions/subscription-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "docs/planes-suscripcion.md",
          "basename": "planes-suscripcion.md",
          "matches": [
            "docs/planes-suscripcion.md"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-26-blog.md",
      "title": "26. Blog IA MaLove.App (estado 2025-10-29)",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "",
      "checklistSection": "1. Variables de entorno: `OPENAI_API_KEY`, `TAVILY_API_KEY`, `BLOG_AUTOMATION_*`, `BLOG_COVER_STORAGE_BUCKET` (opcional), `BLOG_SUPPORTED_LANGUAGES` (lista CSV, por defecto `es,en,fr`). Verificar bucket existe.\n2. Reglas Firestore/Storage: permitir escritura controlada en `blogPosts`, `blogEditorialPlan`, `blog/covers/*` solo al backend admin. Lectura p√∫blica solo `status=published`.\n3. √çndices: `blogPosts status+generatedAt`, `blogPosts status+publishedAt`, `blogPosts availableLanguages+publishedAt`, `blogEditorialPlan status+date`.\n4. Logs/monitoring: habilitar alertas de worker, revisar volumen de Tavily/OpenAI.\n5. i18n: confirmar traducciones en `src/i18n/locales/*/common.json` (`blog`, `adminBlog` keys).\n6. Limpieza: eliminar agregador RSS legacy (`fetchWeddingNews`), o mantener redirecci√≥n temporal para Home si se desea fallback.",
      "e2eSection": "",
      "e2eChecks": [],
      "implChecks": [],
      "conclusion": "desconocido"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-27-momentos.md",
      "title": "27. Momentos (√Ålbum Compartido) ‚Äî estado 2025-10-24",
      "implementedLines": [],
      "pendingLines": [
        "reforzar m√©tricas y observabilidad, adem√°s de endurecer la experiencia QR p√∫blica."
      ],
      "roadmapSection": "1. **MVP interno (Sprint 1-2)**:\n   - Crear √°lbum √∫nico `momentos` por boda.\n   - Flujo invitado con token + subida foto + moderaci√≥n manual + aprobaci√≥n.\n   - Feed anfitri√≥n b√°sico + download simple (lista enlaces).\n2. **Release p√∫blico (Sprint 3-4)**:\n   - QR dinamico, slideshow, export ZIP, reacciones, analytics b√°sicos.\n   - Vision API para flag + email diarios.\n   - Escenas configurables + selector en flujo invitado + filtros host.\n   - Gamificaci√≥n base (badges, leaderboard diario, mensajes de agradecimiento).\n3. **Optimizaci√≥n (Sprint 5+)**:\n   - App nativa offline, subida video corto, stories autom√°ticas.\n   - Auto-highlights con heur√≠stica avanzada + experimentos IA ligera (detecci√≥n emociones, nitidez).\n   - √Ålbumes m√∫ltiples (Preboda, Postboda), integraciones fot√≥grafo.\n   - Automatizaciones marketing (`compartir con invitados` + plantillas email).",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/moments/moments-empty-state.cy.js`: valida el estado de acceso cuando no existe una boda activa antes de cargar Momentos, garantizando que el usuario reciba la gu√≠a adecuada antes de habilitar la colaboraci√≥n.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/moments/moments-empty-state.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-28-dashboard-planner.md",
      "title": "28. Dashboard Wedding Planner (estado 2025-10-13)",
      "implementedLines": [
        "`HomePage.jsx` (deriva a `PlannerDashboard.jsx` para planners), `PlannerDashboard.jsx`, `WeddingContext.jsx`, `useFirestoreCollection.js`, `useWeddingCollection.js`, navegaci√≥n planner en `Nav.jsx`, portfolio multi-boda en `Bodas.jsx`."
      ],
      "pendingLines": [
        "poblar m√©tricas de alertas/inspiraci√≥n/blog, sincronizar recuentos con Firestore en tiempo real y reforzar UX cuando no exista boda activa."
      ],
      "roadmapSection": "",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/dashboard/diagnostic-panel.cy.js`: valida el panel de diagn√≥stico y sus enlaces auxiliares.\n- `cypress/e2e/dashboard/global-search-shortcuts.cy.js`: recorre accesos r√°pidos y atajos de b√∫squeda global.\n- `cypress/e2e/dashboard/main-navigation.cy.js`: comprueba navegaci√≥n principal para planners con m√∫ltiples bodas.\n- `cypress/e2e/dashboard/planner-dashboard.cy.js`: smoke completo del dashboard (widgets, m√©tricas y persistencia de selecci√≥n).",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/dashboard/diagnostic-panel.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/dashboard/global-search-shortcuts.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/dashboard/main-navigation.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/dashboard/planner-dashboard.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "HomePage.jsx",
          "basename": "HomePage.jsx",
          "matches": [
            "apps/main-app/src/components/HomePage.jsx"
          ]
        },
        {
          "ref": "PlannerDashboard.jsx",
          "basename": "PlannerDashboard.jsx",
          "matches": [
            "apps/main-app/src/components/PlannerDashboard.jsx"
          ]
        },
        {
          "ref": "PlannerDashboard.jsx",
          "basename": "PlannerDashboard.jsx",
          "matches": [
            "apps/main-app/src/components/PlannerDashboard.jsx"
          ]
        },
        {
          "ref": "WeddingContext.jsx",
          "basename": "WeddingContext.jsx",
          "matches": [
            "apps/main-app/src/context/WeddingContext.jsx"
          ]
        },
        {
          "ref": "useFirestoreCollection.js",
          "basename": "useFirestoreCollection.js",
          "matches": [
            "apps/main-app/src/hooks/useFirestoreCollection.js"
          ]
        },
        {
          "ref": "useWeddingCollection.js",
          "basename": "useWeddingCollection.js",
          "matches": [
            "apps/main-app/src/hooks/useWeddingCollection.js"
          ]
        },
        {
          "ref": "Nav.jsx",
          "basename": "Nav.jsx",
          "matches": [
            "apps/main-app/src/components/Nav.jsx"
          ]
        },
        {
          "ref": "Bodas.jsx",
          "basename": "Bodas.jsx",
          "matches": [
            "apps/main-app/src/pages/Bodas.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-29-upgrade-roles.md",
      "title": "29. Upgrade de Rol (Owner ‚Üí Assistant ‚Üí Planner) (estado 2025-10-13)",
      "implementedLines": [
        "selector de rol en registro (`src/components/auth/RegisterForm.jsx:56`), persistencia local del rol en `useAuth` (`src/hooks/useAuth.jsx:180`, `src/hooks/useAuth.jsx:593`), navegaci√≥n y dashboard condicionados por rol (`src/components/Nav.jsx:29`, `src/components/HomePage.jsx:77`), v√≠nculos de bodas por rol en `WeddingService` (`src/services/WeddingService.js:144`, `src/services/WeddingService.js:487`, `src/services/WeddingService.js:510`), invitaciones desde `WeddingAccountLink.jsx:59` y aceptaci√≥n `WeddingAccountLink.jsx:79`."
      ],
      "pendingLines": [
        "flujo unificado de upgrade con checkout de plan, sincronizaci√≥n Firestore/localStorage del nuevo rol, l√≠mites de bodas por plan, degradaci√≥n autom√°tica al expirar el plan y panel de gesti√≥n para revertir cambios."
      ],
      "roadmapSection": "",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/account/role-upgrade-flow.cy.js`: recorre el upgrade de roles (owner/assistant/planner), validaciones y persistencia.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/account/role-upgrade-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "src/components/auth/RegisterForm.jsx:56",
          "basename": "RegisterForm.jsx:56",
          "matches": [
            "apps/main-app/src/components/auth/RegisterForm.jsx"
          ]
        },
        {
          "ref": "useAuth",
          "basename": "useAuth",
          "matches": [
            "apps/main-app/src/hooks/useAuth.jsx"
          ]
        },
        {
          "ref": "src/hooks/useAuth.jsx:180",
          "basename": "useAuth.jsx:180",
          "matches": [
            "apps/main-app/src/hooks/useAuth.jsx"
          ]
        },
        {
          "ref": "src/hooks/useAuth.jsx:593",
          "basename": "useAuth.jsx:593",
          "matches": [
            "apps/main-app/src/hooks/useAuth.jsx"
          ]
        },
        {
          "ref": "src/components/Nav.jsx:29",
          "basename": "Nav.jsx:29",
          "matches": [
            "apps/main-app/src/components/Nav.jsx"
          ]
        },
        {
          "ref": "src/components/HomePage.jsx:77",
          "basename": "HomePage.jsx:77",
          "matches": [
            "apps/main-app/src/components/HomePage.jsx"
          ]
        },
        {
          "ref": "WeddingService",
          "basename": "WeddingService",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        },
        {
          "ref": "src/services/WeddingService.js:144",
          "basename": "WeddingService.js:144",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        },
        {
          "ref": "src/services/WeddingService.js:487",
          "basename": "WeddingService.js:487",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        },
        {
          "ref": "src/services/WeddingService.js:510",
          "basename": "WeddingService.js:510",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        },
        {
          "ref": "WeddingAccountLink.jsx:59",
          "basename": "WeddingAccountLink.jsx:59",
          "matches": [
            "apps/main-app/src/components/settings/WeddingAccountLink.jsx"
          ]
        },
        {
          "ref": "WeddingAccountLink.jsx:79",
          "basename": "WeddingAccountLink.jsx:79",
          "matches": [
            "apps/main-app/src/components/settings/WeddingAccountLink.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-2b-creacion-boda-asistente.md",
      "title": "2B. Asistente Conversacional para Crear Bodas/Eventos ¬∑ estado 2025-10-11",
      "implementedLines": [
        "`src/pages/CreateWeddingAssistant.jsx`, `src/context/WeddingContext.jsx`, `src/config/eventStyles.js`, servicios en `src/services/WeddingService.js` (createWedding, seedDefaultTasksForWedding)."
      ],
      "pendingLines": [
        "telemetr√≠a dedicada, iterar prompts/UX, habilitar m√∫ltiples rondas IA y consolidar con flujo cl√°sico."
      ],
      "roadmapSection": "- Instrumentar eventos para comparar funnels (wizard vs. asistente).\n- A√±adir capa IA:\n  - Sugiere estilos/notas basadas en respuestas anteriores o perfil del usuario.\n  - Generar mensaje de agradecimiento/introducci√≥n autom√°tico listo para enviar a invitados.\n  - Respuestas contextualizadas (ej. si fecha est√° cerca, ofrecer recomendaciones de pr√≥ximos pasos).\n- Documentar copy gu√≠a con propuesta de tono (cercano, propositivo, sin tecnicismos); coordinar con equipo de UX writing.\n- Integrar CTA desde dashboard/onboarding y ofrecer elecci√≥n entre modos.\n- Soporte para m√∫ltiples rondas (editar una respuesta concreta sin reiniciar).\n- Posible merge con flujo cl√°sico si el asistente demuestra mejor conversi√≥n.",
      "checklistSection": "- Rutas protegidas (`/crear-evento` y `/crear-evento-asistente`) deben convivir hasta decidir unificar.\n- QA: a√±adir suites Cypress simulando conversaci√≥n (incl. branch de errores).\n- Revisar copy/traducciones de preguntas y botones (ES/EN en la pr√≥xima iteraci√≥n).\n- Telemetr√≠a pendiente (cuando se integre en analytics).",
      "e2eSection": "- `cypress/e2e/onboarding/assistant-conversation-happy.cy.js`: flujo feliz completo hasta crear un evento.\n- `cypress/e2e/onboarding/assistant-context-switch.cy.js`: valida cambios de tema/conversaci√≥n sin perder respuestas previas.\n- `cypress/e2e/onboarding/assistant-followups.cy.js`: comprueba registro de follow-ups y tareas sugeridas.\n- `cypress/e2e/onboarding/create-event-assistant.cy.js`: smoke general del asistente y navegaci√≥n hacia la ficha de boda.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/onboarding/assistant-conversation-happy.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/onboarding/assistant-context-switch.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/onboarding/assistant-followups.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/onboarding/create-event-assistant.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "src/pages/CreateWeddingAssistant.jsx",
          "basename": "CreateWeddingAssistant.jsx",
          "matches": [
            "apps/main-app/src/pages/CreateWeddingAssistant.jsx"
          ]
        },
        {
          "ref": "src/context/WeddingContext.jsx",
          "basename": "WeddingContext.jsx",
          "matches": [
            "apps/main-app/src/context/WeddingContext.jsx"
          ]
        },
        {
          "ref": "src/config/eventStyles.js",
          "basename": "eventStyles.js",
          "matches": [
            "apps/main-app/src/config/eventStyles.js"
          ]
        },
        {
          "ref": "src/services/WeddingService.js",
          "basename": "WeddingService.js",
          "matches": [
            "apps/main-app/src/services/WeddingService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-2c-personalizacion-continua.md",
      "title": "2C. Personalizaci√≥n IA Continua (estado 2025-10-14)",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/personalization/personalization-preferences.cy.js`: recorre la creaci√≥n asistida de un evento y verifica que el estilo elegido queden registrados en `preferences.style` y en el `eventProfileSummary` del documento de la boda.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/personalization/personalization-preferences.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "desconocido"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-3-gestion-invitados.md",
      "title": "3. Gesti√≥n de Invitados (estado 2025-10-07)",
      "implementedLines": [
        "`Invitados.jsx`, `RSVPDashboard.jsx`, `AcceptInvitation.jsx`, `GuestEventBridge.jsx`, componentes (`GuestList`, `GuestFilters`, `GuestForm`, `GuestBulkGrid`, `ContactsImporter`, `GroupManager`), modales de WhatsApp (`WhatsAppModal`, `WhatsAppSender`, `SaveTheDateModal`, `InviteTemplateModal`), servicios `useGuests`, `SyncService`, `MessageTemplateService`, `whatsappService`, `WhatsAppBatchService`, dataset demo (carga de ejemplos en `useGuests.js`) y panel anal√≠tico RSVP."
      ],
      "pendingLines": [
        "sincronizaci√≥n completa con Seating Plan (persistencia bidireccional) y automatizaciones IA reactivas a cambios de invitados."
      ],
      "roadmapSection": "### üîç ESTADO REAL VERIFICADO (2025-10-24)\n\n**Implementaci√≥n: ‚úÖ 95%** | **Cobertura E2E: üü° 65%**\n\n**‚úÖ IMPLEMENTADO Y FUNCIONAL:**\n\n1. **CRUD Completo de Invitados** ‚úÖ\n   - `src/pages/Invitados.jsx` ‚úÖ\n   - `src/components/guests/GuestList.jsx` ‚úÖ\n   - `src/components/guests/GuestForm.jsx` ‚úÖ\n   - `src/hooks/useGuests.js` ‚úÖ\n\n2. **Importaci√≥n Masiva** ‚úÖ\n   - `src/components/guests/ContactsImporter.jsx` ‚úÖ\n   - `src/components/guests/GuestBulkGrid.jsx` ‚úÖ\n   - Soporta CSV/Excel, Contact Picker API\n   - Deduplicaci√≥n por email/tel√©fono\n\n3. **WhatsApp Batch Messaging** ‚úÖ\n   - `src/services/whatsappService.js` ‚úÖ\n   - `src/components/guests/WhatsAppModal.jsx` ‚úÖ\n   - `src/services/WhatsAppBatchService.js` ‚úÖ\n   - Programaci√≥n de env√≠os\n   - L√≠mite 250 mensajes por lote\n\n4. **RSVP Tracking** ‚úÖ\n   - `src/pages/RSVPDashboard.jsx` ‚úÖ\n   - Dashboard con m√©tricas\n   - Estados: pending/confirmed/declined\n\n5. **Grupos y Asignaci√≥n** ‚úÖ\n   - `src/components/guests/GroupManager.jsx` ‚úÖ\n   - Gesti√≥n de grupos\n   - Asignaci√≥n de mesa b√°sica\n\n6. **Offline-First** ‚úÖ\n   - Sincronizaci√≥n con localStorage\n   - `src/services/SyncService.js` ‚úÖ\n   - Eventos `MaLove.App-guests-updated`\n\n7. **Tests E2E** üü°\n   - `cypress/e2e/guests/` (4 archivos)\n   - `cypress/e2e/critical/guests.cy.js` ‚úÖ\n   - `cypress/e2e/critical/guests-real.cy.js` ‚úÖ\n   - Cobertura: ~65% (tests b√°sicos)\n\n**üü° PARCIALMENTE IMPLEMENTADO:**\n\n1. **Integraci√≥n Seating Bidireccional** üü°\n   - Asignaci√≥n a mesa: ‚úÖ Funciona\n   - Sincronizaci√≥n bidireccional: ‚ùå Pendiente\n   - Campo `seatAssignment` existe pero no se sincroniza autom√°ticamente\n   - Estimaci√≥n: 8-12 horas\n\n2. **Manejo Defensivo de Hooks** üü°\n   - P√°gina usa valores mock para estabilidad (decisi√≥n temporal)\n   - Try-catch implementado pero hooks deshabilitados\n   - Reintegraci√≥n gradual pendiente\n\n**‚ùå NO IMPLEMENTADO:**\n\n1. **IA para Agrupar Invitados** ‚ùå\n   - Sugerencias autom√°ticas de grupos ‚ùå\n   - Mensajes personalizados con IA ‚ùå\n   - Estimaci√≥n: 15-20 horas\n\n2. **Mensajer√≠a Omnicanal** ‚ùå\n   - SMS/push orquestada ‚ùå\n   - Automatizaciones avanzadas ‚ùå\n   - Estimaci√≥n: 20-30 horas\n\n3. **Portal Colaborador** ‚ùå\n   - Permisos restringidos ‚ùå\n   - Vista externa ‚ùå\n   - Estimaci√≥n: 30-40 horas\n\n4. **Sincronizaci√≥n CRM Externo** ‚ùå\n   - Integraci√≥n CRM ‚ùå\n   - Estimaci√≥n: 25-35 horas\n\n**‚ö†Ô∏è TESTS FALTANTES:**\n\n1. **WhatsApp Service** ‚ùå\n   - `whatsappService.js` sin tests E2E\n   - `WhatsAppBatchService.js` sin tests\n   - Estimaci√≥n tests: 4 horas\n\n2. **Importaci√≥n Masiva** üü°\n   - Tests parciales en `guests-import.cy.js`\n   - Falta cobertura completa\n   - Estimaci√≥n: 3 horas\n\n3. **Grupos** ‚ùå\n   - `GroupManager.jsx` sin tests\n   - Estimaci√≥n: 3 horas\n\n### Pendientes Priorizados:\n\n**Corto Plazo (1-2 semanas):**\n- ‚è≥ Sincronizaci√≥n bidireccional Seating (8-12h)\n- ‚è≥ Tests WhatsApp service (4h)\n- ‚è≥ Tests importaci√≥n completa (3h)\n\n**Medio Plazo (1-2 meses):**\n- ‚è≥ IA para agrupar invitados (15-20h)\n- ‚è≥ Mensajer√≠a omnicanal (20-30h)\n\n**Largo Plazo (3-6 meses):**\n- ‚è≥ Portal colaborador (30-40h)\n- ‚è≥ Sincronizaci√≥n CRM (25-35h)",
      "checklistSection": "- Revisar reglas Firestore (`guests`, `guestMessages`, `guestImports`, `guestSegments`).\n- Configurar proveedores (WhatsApp API, Mailgun) y plantillas (`MessageTemplateService`).\n- Validar cuotas/m√©tricas (`guestMetrics`, `rsvpStats`) y endpoints (`/api/whatsapp/*`, `/api/rsvp/reminders`, `/api/guests/{id}/rsvp-link`).\n- Ejecutar seeds QA (`window.__GUESTS_TEST_API__` ‚Üí `loadFixture`).",
      "e2eSection": "- `cypress/e2e/guests/guest-segment-sync.cy.js`\n- `cypress/e2e/guests/guest-whatsapp-flow.cy.js`\n- `cypress/e2e/guests/guest-import.cy.js`",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/guests/guest-segment-sync.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/guests/guest-whatsapp-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/guests/guest-import.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Invitados.jsx",
          "basename": "Invitados.jsx",
          "matches": [
            "apps/main-app/src/pages/Invitados.jsx"
          ]
        },
        {
          "ref": "RSVPDashboard.jsx",
          "basename": "RSVPDashboard.jsx",
          "matches": [
            "apps/main-app/src/pages/RSVPDashboard.jsx"
          ]
        },
        {
          "ref": "AcceptInvitation.jsx",
          "basename": "AcceptInvitation.jsx",
          "matches": [
            "apps/main-app/src/pages/AcceptInvitation.jsx"
          ]
        },
        {
          "ref": "GuestEventBridge.jsx",
          "basename": "GuestEventBridge.jsx",
          "matches": [
            "apps/main-app/src/components/guests/GuestEventBridge.js",
            "apps/main-app/src/components/guests/GuestEventBridge.jsx"
          ]
        },
        {
          "ref": "GuestList",
          "basename": "GuestList",
          "matches": [
            "apps/main-app/src/components/guests/GuestList.jsx"
          ]
        },
        {
          "ref": "GuestFilters",
          "basename": "GuestFilters",
          "matches": [
            "apps/main-app/src/components/guests/GuestFilters.jsx"
          ]
        },
        {
          "ref": "GuestForm",
          "basename": "GuestForm",
          "matches": [
            "apps/main-app/src/components/guests/GuestForm.jsx"
          ]
        },
        {
          "ref": "GuestBulkGrid",
          "basename": "GuestBulkGrid",
          "matches": [
            "apps/main-app/src/components/guests/GuestBulkGrid.jsx"
          ]
        },
        {
          "ref": "ContactsImporter",
          "basename": "ContactsImporter",
          "matches": [
            "apps/main-app/src/components/guests/ContactsImporter.jsx"
          ]
        },
        {
          "ref": "GroupManager",
          "basename": "GroupManager",
          "matches": [
            "apps/main-app/src/components/guests/GroupManager.jsx"
          ]
        },
        {
          "ref": "WhatsAppModal",
          "basename": "WhatsAppModal",
          "matches": [
            "apps/main-app/src/components/whatsapp/WhatsAppModal.jsx"
          ]
        },
        {
          "ref": "WhatsAppSender",
          "basename": "WhatsAppSender",
          "matches": [
            "apps/main-app/src/components/whatsapp/WhatsAppSender.jsx"
          ]
        },
        {
          "ref": "SaveTheDateModal",
          "basename": "SaveTheDateModal",
          "matches": [
            "apps/main-app/src/components/whatsapp/SaveTheDateModal.jsx"
          ]
        },
        {
          "ref": "InviteTemplateModal",
          "basename": "InviteTemplateModal",
          "matches": [
            "apps/main-app/src/components/whatsapp/InviteTemplateModal.jsx"
          ]
        },
        {
          "ref": "useGuests",
          "basename": "useGuests",
          "matches": [
            "apps/main-app/src/hooks/useGuests.js"
          ]
        },
        {
          "ref": "SyncService",
          "basename": "SyncService",
          "matches": [
            "apps/main-app/src/services/SyncService.js"
          ]
        },
        {
          "ref": "MessageTemplateService",
          "basename": "MessageTemplateService",
          "matches": [
            "apps/main-app/src/services/MessageTemplateService.js"
          ]
        },
        {
          "ref": "whatsappService",
          "basename": "whatsappService",
          "matches": [
            "backend/services/whatsappService.js",
            "apps/main-app/src/services/whatsappService.js"
          ]
        },
        {
          "ref": "WhatsAppBatchService",
          "basename": "WhatsAppBatchService",
          "matches": [
            "apps/main-app/src/services/WhatsAppBatchService.js"
          ]
        },
        {
          "ref": "useGuests.js",
          "basename": "useGuests.js",
          "matches": [
            "apps/main-app/src/hooks/useGuests.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-30-pagina-inicio.md",
      "title": "30. P√°gina de inicio (estado 2025-10-13)",
      "implementedLines": [
        "`src/pages/HomeUser.jsx`, `src/components/HomePage.jsx`, `Nav.jsx`, `ProviderSearchModal.jsx`, `useFinance`, servicios en `src/services/blogService.js` y `src/services/wallService.js`."
      ],
      "pendingLines": [
        "reemplazar datos mock/localStorage por or√≠genes reales, unificar con `Dashboard.jsx`, instrumentar telemetr√≠a de interacci√≥n y ocultar helpers de desarrollo en producci√≥n."
      ],
      "roadmapSection": "- Reemplazar fuentes `localStorage` por datos sincronizados (Firestore/REST) y estados compartidos v√≠a contextos.\n- Unificar Home con `Dashboard.jsx` (Flujo 22) y permitir configuraci√≥n de widgets.\n- A√±adir resumen de actividad reciente y pr√≥ximos hitos (tareas, pagos, invitados).\n- Implementar buscador global accesible (atajo Cmd/Ctrl+K) y recomendaciones IA.",
      "checklistSection": "- Envolver bot√≥n \"Rehacer tutorial\" tras feature flag (`VITE_ENABLE_DEV_TOOLS` o similar).\n- Confirmar traducciones `i18n` para textos nuevos (progress, acciones, cards).\n- Asegurar que `fetchWeddingNews` y `fetchWall` cuenten con mocks en ambientes de prueba.\n- Verificar estilos CSS variables (`--color-*`) en temas claro/oscuro.",
      "e2eSection": "- `cypress/e2e/home/home-greeting-names.cy.js`: smoke de la home (saludos personalizados, quick actions y persistencia local).",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/home/home-greeting-names.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "src/pages/HomeUser.jsx",
          "basename": "HomeUser.jsx",
          "matches": [
            "apps/main-app/src/pages/HomeUser.jsx"
          ]
        },
        {
          "ref": "src/components/HomePage.jsx",
          "basename": "HomePage.jsx",
          "matches": [
            "apps/main-app/src/components/HomePage.jsx"
          ]
        },
        {
          "ref": "Nav.jsx",
          "basename": "Nav.jsx",
          "matches": [
            "apps/main-app/src/components/Nav.jsx"
          ]
        },
        {
          "ref": "ProviderSearchModal.jsx",
          "basename": "ProviderSearchModal.jsx",
          "matches": [
            "apps/main-app/src/components/ProviderSearchModal.jsx"
          ]
        },
        {
          "ref": "useFinance",
          "basename": "useFinance",
          "matches": [
            "apps/main-app/src/hooks/useFinance.js"
          ]
        },
        {
          "ref": "src/services/blogService.js",
          "basename": "blogService.js",
          "matches": [
            "apps/main-app/src/services/blogService.js"
          ]
        },
        {
          "ref": "src/services/wallService.js",
          "basename": "wallService.js",
          "matches": [
            "apps/main-app/src/services/wallService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-31-estilo-global.md",
      "title": "31. Estilo Global (estado 2025-10-13)",
      "implementedLines": [],
      "pendingLines": [
        "reutilizar `weddings/{id}/branding/main.palette` en los generadores (web, invitaciones, assets), sincronizar cambios de `MaLove.AppProfile` con Firestore sin depender de eventos locales y exponer UI dedicada para editar estilo global dentro de `/perfil`."
      ],
      "roadmapSection": "- Consumir `branding/main.palette` en `websitePromptBuilder` y en generadores de invitaciones (`ImageGeneratorAI`).  \n- Anadir UI declarativa de paleta/tipografias en `/perfil` con preview y guardado directo en Firestore (sin depender de localStorage).  \n- Emitir eventos de monitoreo (p.ej. `style_updated`, `palette_saved`) y panel en dashboard admin.  \n- Soportar estilos personalizados (valores libres) con normalizacion y mapeo IA.  \n- Consolidar tokens CSS (crear `src/styles/tokens.css` referenciado en docs) y documentar proceso de override.  \n- Tests e2e para vector editor y para cambios via comandos IA.",
      "checklistSection": "- Confirmar que `EVENT_STYLE_OPTIONS` coincide con copy publico y traducciones.  \n- Verificar reglas de seguridad Firestore para `weddings/{id}/branding`.  \n- Asegurar que el bundle incluye `ThemeToggle` y variables CSS sin colisiones.  \n- Revisar que asistentes IA reciban contexto (`style`, `guestCount`, `formality`) en `ChatWidget` antes de habilitar nuevas plantillas.",
      "e2eSection": "- `cypress/e2e/style/style-global.cy.js`: asegura que el guardado de estilo y paleta desde `/perfil` persista correctamente (incluyendo feedback mediante toasts) incluso cuando se trabaja con Firestore simulado.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/style/style-global.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-4-invitados-operativa.md",
      "title": "4. Invitados ‚Äì Plan de Asientos (estado 2025-10-12)",
      "implementedLines": [],
      "pendingLines": [
        ""
      ],
      "roadmapSection": "- Panel lateral inteligente con recomendaciones aut√≥nomas y resoluci√≥n de conflictos por IA.  \n- Colaboraci√≥n en tiempo real: evolucionar hacia versionado avanzado (locks y merge multi-editor) sobre la presencia y sincronizaci√≥n actuales.  \n- Integraci√≥n con proveedores/venues (ingesta autom√°tica de planos y configuraciones).  \n- Exportaciones con presets guardados y env√≠o directo a stakeholders.\n- Reestructurar el PDF avanzado en secciones dedicadas (mapa de ceremonia, plano de banquete, lista global, invitados por mesa, dietas especiales, VIP de Momentos Especiales).",
      "checklistSection": "- Revisar reglas Firestore (`seating`, `seatingHistory`, `seatingLocks`, `seatingPresence`).\n- Validar seeds y l√≠mites (mesas, invitados) para rendimiento y uso de auto-assign.\n- Testear exportes (PDF/SVG/CSV/PNG) con presets y tama√±o de archivos.\n- Verificar experiencia m√≥vil/desktop: m√°rgenes, paneles, persistencia de toggles, contraste.\n- Automatizar backups peri√≥dicos de `seating` + `seatingHistory` para auditor√≠a.",
      "e2eSection": "",
      "e2eChecks": [],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-5-timeline-tareas.md",
      "title": "5b. Timeline y Tareas (estado 2025-10-07)",
      "implementedLines": [
        "`Tasks.jsx`, `TaskSidePanel.jsx`, `Checklist.jsx`, `TaskList.jsx`, `EventsCalendar.jsx`, `LongTermTasksGantt.jsx`, `CalendarSync.jsx`, `TaskEventBridge.jsx`, `TaskNotificationWatcher.jsx`, `TasksRefactored.jsx`, hook `useWeddingTasksHierarchy.js`, `CalendarComponents.jsx`, plantilla `apps/main-app/src/data/tasks/masterTimelineTemplate.json`, indicadores de riesgo en el Gantt y comentarios colaborativos con menciones y notificaciones en `TaskSidePanel.jsx`."
      ],
      "pendingLines": [
        "Motor IA que personaliza un plan de tareas padre/subtareas a partir de una plantilla maestra y matriz de responsabilidades."
      ],
      "roadmapSection": "- IA que genere plan de tareas padre/subtareas personalizado (plantilla maestra + reglas LLM).\n- Matriz RACI y asignaciones m√∫ltiples con permisos.\n- Auto-priorizaci√≥n seg√∫n proximidad y criticidad.\n- Panel de riesgos con predicci√≥n de retrasos.\n- Gamificaci√≥n completa (streaks, objetivos semanales, recompensas).\n- Sync bidireccional con calendarios externos (Google/Microsoft).",
      "checklistSection": "- Reglas Firestore actualizadas (`tasks`, `checklist`, `taskAutomations`).\n- Tokens de calendario protegidos (Cloud Functions) y rotaci√≥n peri√≥dica.\n- Configurar servicios de notificaci√≥n (`MAILGUN_*`, `PUSH_PROVIDER`).\n- Validar performance con >500 tareas y modo Gantt.",
      "e2eSection": "- `cypress/e2e/tasks/all_subtasks_modal.cy.js`: recorre creaci√≥n de bloques, subtareas y actualizaci√≥n de estados dentro del timeline.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/tasks/all_subtasks_modal.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "Tasks.jsx",
          "basename": "Tasks.jsx",
          "matches": [
            "apps/main-app/src/pages/Tasks.css",
            "apps/main-app/src/pages/Tasks.jsx",
            "apps/main-app/src/i18n/locales/tr/tasks.json",
            "apps/main-app/src/i18n/locales/sv/tasks.json",
            "apps/main-app/src/i18n/locales/sl/tasks.json",
            "apps/main-app/src/i18n/locales/sk/tasks.json",
            "apps/main-app/src/i18n/locales/ru/tasks.json",
            "apps/main-app/src/i18n/locales/ro/tasks.json",
            "apps/main-app/src/i18n/locales/pt/tasks.json",
            "apps/main-app/src/i18n/locales/pl/tasks.json",
            "apps/main-app/src/i18n/locales/no/tasks.json",
            "apps/main-app/src/i18n/locales/nl/tasks.json",
            "apps/main-app/src/i18n/locales/mt/tasks.json",
            "apps/main-app/src/i18n/locales/lv/tasks.json",
            "apps/main-app/src/i18n/locales/lt/tasks.json",
            "apps/main-app/src/i18n/locales/it/tasks.json",
            "apps/main-app/src/i18n/locales/is/tasks.json",
            "apps/main-app/src/i18n/locales/hu/tasks.json",
            "apps/main-app/src/i18n/locales/hr/tasks.json",
            "apps/main-app/src/i18n/locales/fr-CA/tasks.json",
            "apps/main-app/src/i18n/locales/fr/tasks.json",
            "apps/main-app/src/i18n/locales/fi/tasks.json",
            "apps/main-app/src/i18n/locales/eu/tasks.json",
            "apps/main-app/src/i18n/locales/et/tasks.json",
            "apps/main-app/src/i18n/locales/es-MX/tasks.json",
            "apps/main-app/src/i18n/locales/es-AR/tasks.json",
            "apps/main-app/src/i18n/locales/es/tasks.json",
            "apps/main-app/src/i18n/locales/en/tasks.json",
            "apps/main-app/src/i18n/locales/el/tasks.json",
            "apps/main-app/src/i18n/locales/de/tasks.json",
            "apps/main-app/src/i18n/locales/da/tasks.json",
            "apps/main-app/src/i18n/locales/cs/tasks.json",
            "apps/main-app/src/i18n/locales/ca/tasks.json",
            "apps/main-app/src/i18n/locales/bg/tasks.json",
            "apps/main-app/src/i18n/locales/ar/tasks.json"
          ]
        },
        {
          "ref": "TaskSidePanel.jsx",
          "basename": "TaskSidePanel.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskSidePanel.jsx"
          ]
        },
        {
          "ref": "Checklist.jsx",
          "basename": "Checklist.jsx",
          "matches": [
            "apps/main-app/src/pages/Checklist.jsx",
            "apps/main-app/src/pages/protocolo/Checklist.jsx"
          ]
        },
        {
          "ref": "TaskList.jsx",
          "basename": "TaskList.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskList.jsx"
          ]
        },
        {
          "ref": "EventsCalendar.jsx",
          "basename": "EventsCalendar.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/EventsCalendar.jsx"
          ]
        },
        {
          "ref": "LongTermTasksGantt.jsx",
          "basename": "LongTermTasksGantt.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/LongTermTasksGantt.jsx"
          ]
        },
        {
          "ref": "CalendarSync.jsx",
          "basename": "CalendarSync.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/CalendarSync.jsx"
          ]
        },
        {
          "ref": "TaskEventBridge.jsx",
          "basename": "TaskEventBridge.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskEventBridge.js",
            "apps/main-app/src/components/tasks/TaskEventBridge.jsx"
          ]
        },
        {
          "ref": "TaskNotificationWatcher.jsx",
          "basename": "TaskNotificationWatcher.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskNotificationWatcher.js",
            "apps/main-app/src/components/tasks/TaskNotificationWatcher.jsx"
          ]
        },
        {
          "ref": "TasksRefactored.jsx",
          "basename": "TasksRefactored.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TasksRefactored.jsx"
          ]
        },
        {
          "ref": "useWeddingTasksHierarchy.js",
          "basename": "useWeddingTasksHierarchy.js",
          "matches": [
            "apps/main-app/src/hooks/useWeddingTasksHierarchy.js"
          ]
        },
        {
          "ref": "CalendarComponents.jsx",
          "basename": "CalendarComponents.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/CalendarComponents.jsx"
          ]
        },
        {
          "ref": "apps/main-app/src/data/tasks/masterTimelineTemplate.json",
          "basename": "masterTimelineTemplate.json",
          "matches": [
            "apps/main-app/src/data/tasks/masterTimelineTemplate.json"
          ]
        },
        {
          "ref": "TaskSidePanel.jsx",
          "basename": "TaskSidePanel.jsx",
          "matches": [
            "apps/main-app/src/components/tasks/TaskSidePanel.jsx"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-6-presupuesto.md",
      "title": "6. Gestion de Presupuesto (estado 2025-10-08)",
      "implementedLines": [
        "`src/pages/Finance.jsx`, componentes `src/components/finance/BudgetManager.jsx`, `FinanceOverview.jsx`, `FinanceCharts.jsx`, `PaymentSuggestions.jsx`, `TransactionManager.jsx`, hooks `useFinance`, `useSupplierBudgets`, servicios `EmailInsightsService`, `bankService`, `SyncService`."
      ],
      "pendingLines": [
        "importaci√≥n CSV/Excel con mapeo, anal√≠tica predictiva con IA, ampliaci√≥n de aportaciones colaborativas, reportes exportables y automatizaci√≥n de alertas avanzadas."
      ],
      "roadmapSection": "- Integracion Open Banking: UI de autenticacion, refresco de tokens, categorizacion inteligente, reconciliacion automatica.\n- Importacion CSV/Excel con preview y mapeo de columnas (validaciones server-side).\n- Reportes descargables (PDF/Excel) listos para proveedores y contabilidad.\n- Gestion completa de aportaciones (recordatorios, agradecimientos, panel compartido).\n- Prediccion de gasto y recomendaciones automaticas basadas en proyeccion.\n- Automatizacion de pagos programados y conciliacion con contratos.\n- Adjuntos en `TransactionForm` aceptan `image/*`, `application/pdf`, `.doc`, `.docx`, `.xls`, `.xlsx`. Otros tipos se bloquean en la carga de archivos.\n- Entrenamiento y calibracion continua del consejero conversacional (dataset anonimizado, feedback `advisor_feedback_submitted`, segmentacion regional) para mantener precision y reducir sesgos.",
      "checklistSection": "- Reglas Firestore actualizadas para `finance/main`, subcolecci√≥n `transactions` y almacenamiento de adjuntos (`finance/` en Storage).\n- Revisar limites de seguridad en Cloud Functions de exportacion y notificaciones.\n- Configurar variables `VITE_ENABLE_FINANCE_ALERTS`, `MAILGUN_*`, `VITE_BANK_API_BASE_URL`, `VITE_BANK_API_KEY`, `VITE_EMAIL_INSIGHTS_*`.\n- Asegurar migracion de bodas antiguas para poblar `finance/main` con nuevas llaves (`alertThresholds`, `contributions`) y mover adjuntos a rutas `finance/`.\n- Verificar permisos de storage y tokens para Email Insights / Open Banking, y limpiar colas pendientes en `SyncService` antes de despliegue.",
      "e2eSection": "- `cypress/e2e/finance/finance-flow.cy.js` y `cypress/e2e/finance/finance-flow-full.cy.js`: validan creaci√≥n del presupuesto base, contribuciones y navegaci√≥n entre pesta√±as financieras.\n- `cypress/e2e/finance/finance-budget.cy.js`, `cypress/e2e/finance/finance-transactions.cy.js`, `cypress/e2e/finance/finance-contributions.cy.js`, `cypress/e2e/finance/finance-analytics.cy.js`, `cypress/e2e/budget_flow.cy.js` y `cypress/e2e/finance/finance-advisor-chat.cy.js`: cubren edici√≥n de categor√≠as, registro de movimientos, paneles anal√≠ticos y la aplicaci√≥n de recomendaciones del consejero IA.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/finance/finance-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-flow-full.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-budget.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-transactions.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-contributions.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-analytics.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/budget_flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/finance/finance-advisor-chat.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "src/pages/Finance.jsx",
          "basename": "Finance.jsx",
          "matches": [
            "backend/routes/finance.js",
            "apps/main-app/src/pages/Finance.jsx",
            "apps/main-app/src/i18n/locales/tr/finance.json",
            "apps/main-app/src/i18n/locales/sv/finance.json",
            "apps/main-app/src/i18n/locales/sl/finance.json",
            "apps/main-app/src/i18n/locales/sk/finance.json",
            "apps/main-app/src/i18n/locales/ru/finance.json",
            "apps/main-app/src/i18n/locales/ro/finance.json",
            "apps/main-app/src/i18n/locales/pt/finance.json",
            "apps/main-app/src/i18n/locales/pl/finance.json",
            "apps/main-app/src/i18n/locales/no/finance.json",
            "apps/main-app/src/i18n/locales/nl/finance.json",
            "apps/main-app/src/i18n/locales/mt/finance.json",
            "apps/main-app/src/i18n/locales/lv/finance.json",
            "apps/main-app/src/i18n/locales/lt/finance.json",
            "apps/main-app/src/i18n/locales/it/finance.json",
            "apps/main-app/src/i18n/locales/is/finance.json",
            "apps/main-app/src/i18n/locales/hu/finance.json",
            "apps/main-app/src/i18n/locales/hr/finance.json",
            "apps/main-app/src/i18n/locales/fr-CA/finance.json",
            "apps/main-app/src/i18n/locales/fr/finance.json",
            "apps/main-app/src/i18n/locales/fi/finance.json",
            "apps/main-app/src/i18n/locales/eu/finance.json",
            "apps/main-app/src/i18n/locales/et/finance.json",
            "apps/main-app/src/i18n/locales/es-MX/finance.json",
            "apps/main-app/src/i18n/locales/es-AR/finance.json",
            "apps/main-app/src/i18n/locales/es/finance.json",
            "apps/main-app/src/i18n/locales/en/finance.json",
            "apps/main-app/src/i18n/locales/el/finance.json",
            "apps/main-app/src/i18n/locales/de/finance.json",
            "apps/main-app/src/i18n/locales/da/finance.json",
            "apps/main-app/src/i18n/locales/cs/finance.json",
            "apps/main-app/src/i18n/locales/ca/finance.json",
            "apps/main-app/src/i18n/locales/bg/finance.json",
            "apps/main-app/src/i18n/locales/ar/finance.json"
          ]
        },
        {
          "ref": "src/components/finance/BudgetManager.jsx",
          "basename": "BudgetManager.jsx",
          "matches": [
            "apps/main-app/src/components/finance/BudgetManager.jsx"
          ]
        },
        {
          "ref": "FinanceOverview.jsx",
          "basename": "FinanceOverview.jsx",
          "matches": [
            "apps/main-app/src/components/finance/FinanceOverview.jsx"
          ]
        },
        {
          "ref": "FinanceCharts.jsx",
          "basename": "FinanceCharts.jsx",
          "matches": [
            "apps/main-app/src/components/finance/FinanceCharts.jsx"
          ]
        },
        {
          "ref": "PaymentSuggestions.jsx",
          "basename": "PaymentSuggestions.jsx",
          "matches": [
            "apps/main-app/src/components/finance/PaymentSuggestions.jsx"
          ]
        },
        {
          "ref": "TransactionManager.jsx",
          "basename": "TransactionManager.jsx",
          "matches": [
            "apps/main-app/src/components/finance/TransactionManager.jsx"
          ]
        },
        {
          "ref": "useFinance",
          "basename": "useFinance",
          "matches": [
            "apps/main-app/src/hooks/useFinance.js"
          ]
        },
        {
          "ref": "useSupplierBudgets",
          "basename": "useSupplierBudgets",
          "matches": [
            "apps/main-app/src/hooks/useSupplierBudgets.js"
          ]
        },
        {
          "ref": "EmailInsightsService",
          "basename": "EmailInsightsService",
          "matches": [
            "apps/main-app/src/services/EmailInsightsService.js"
          ]
        },
        {
          "ref": "bankService",
          "basename": "bankService",
          "matches": [
            "apps/main-app/src/services/bankService.js"
          ]
        },
        {
          "ref": "SyncService",
          "basename": "SyncService",
          "matches": [
            "apps/main-app/src/services/SyncService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-7-comunicacion-emails.md",
      "title": "7. Comunicaciones y Email (estado 2025-10-13)",
      "implementedLines": [],
      "pendingLines": [
        "cableado de busqueda/ordenacion secundario en `UnifiedInbox/EmailList.jsx`, onboarding con validaciones DKIM/SPF, persistencia server-side de auto-respuestas y migracion definitiva del buzon legacy + actualizacion de pruebas E2E/VTU a la nueva UI."
      ],
      "roadmapSection": "### üîç ESTADO REAL VERIFICADO (2025-10-24)\n\n**‚úÖ IMPLEMENTADO Y FUNCIONAL:**\n1. **emailSchedulerCron** - `backend/jobs/emailSchedulerCron.js` ‚úÖ\n   - C√≥digo completo con `runEmailSchedulerJob()`\n   - Exporta funci√≥n ejecutable manualmente o v√≠a cron\n   - Integrado con `processScheduledEmailQueue`\n   - ‚ö†Ô∏è FALTA: Configurar en Cloud Scheduler/Render Cron para ejecuci√≥n autom√°tica\n\n2. **emailTrashRetention** - `backend/jobs/emailTrashRetention.js` ‚úÖ\n   - Job de limpieza autom√°tica implementado\n   - Elimina emails con m√°s de 30 d√≠as en papelera\n   - Auditor√≠a en colecci√≥n `emailRetentionAudit`\n   - ‚ö†Ô∏è FALTA: Configurar cron diario (0 2 * * *)\n\n3. **onMailUpdated Cloud Function** - `functions/index.js:23-97` ‚úÖ\n   - Actualiza contadores de carpetas autom√°ticamente\n   - Maneja cambios en folder y estado read\n   - Colecci√≥n `emailFolderStats` con totalCount y unreadCount\n   - Funci√≥n auxiliar `updateFolderCount()` completa\n\n4. **Webhooks Mailgun** - `backend/routes/mailgun-webhook.js` ‚úÖ\n   - Endpoint `/webhooks/deliverability` funcional\n   - Verificaci√≥n de firma Mailgun implementada\n   - Registro de eventos b√°sicos\n\n**‚úÖ IMPLEMENTADO (CORRECCI√ìN):**\n\n1. **callClassificationAPI** ‚úÖ - `backend/services/emailClassificationService.js`\n   - **Estado:** EXISTE Y FUNCIONAL (351 l√≠neas)\n   - Clasificaci√≥n con OpenAI GPT-4o-mini\n   - Fallback heur√≠stico local\n   - 8 categor√≠as: Proveedor, Invitado, Finanzas, Contratos, Facturas, Reuniones, RSVP, General\n   - M√©tricas y auditor√≠a completa\n   - **Nota:** Error en an√°lisis anterior - esta funcionalidad S√ç est√° implementada con OpenAI para clasificaci√≥n\n   - La documentaci√≥n marcaba esto como \"‚úÖ 2025-10-20\" INCORRECTAMENTE\n   - Impacto: Clasificaci√≥n solo usa heur√≠sticas locales b√°sicas\n\n**üü° PARCIALMENTE IMPLEMENTADO:**\n1. **Auto-respuestas sincronizaci√≥n**\n   - Backend endpoints: `GET/PUT /api/email-automation/config` ‚úÖ\n   - Persistencia en Firestore ‚úÖ\n   - Frontend a√∫n usa localStorage como primario üü°\n\n### Roadmap Actualizado:\n\n1. **Automatizaci√≥n y backend (Owner: Backend Squad)**\n   - ‚è≥ PENDIENTE: callClassificationAPI con OpenAI (estimado: 8-12h)\n   - ‚úÖ C√ìDIGO LISTO: emailSchedulerCron (solo falta configurar cron externo)\n   - ‚úÖ C√ìDIGO LISTO: emailTrashRetention (solo falta configurar cron diario)\n   - ‚úÖ IMPLEMENTADO: onMailUpdated Cloud Function\n   - üü° MEJORAR: Webhooks Mailgun (completar procesamiento de deliverability)\n2. **UX / funcionalidad (Owner: Frontend Squad, ETA Q1 2026)**\n   - Drag & drop y reorder de carpetas personalizadas con sincronizaci√≥n emailFolderStats.\n   - Papelera avanzada: restaurar carpeta original, m√©tricas de retenci√≥n y vaciado masivo.\n   - B√∫squeda/orden integrados en estado global y backend (GET /api/mail).\n   - Toggle de buz√≥n legacy solo soporte y plan de retirada.\n   - Onboarding completo con validaci√≥n DKIM/SPF y correo de prueba automatizado.\n3. **Anal√≠tica y monitoreo (Owner: Data/Analytics, ETA Q1 2026)**\n   - Dashboard Grafana/BigQuery con KPIs (deliverySuccess, openRate, \neplyTimeMedian, utoReplyCoverage, iaAdoption, cleanupRate).\n   - Alertas autom√°ticas: rebotes >5% diario, complained >0.5%, SLA respuesta >24h.\n4. **Integraciones cruzadas (Owner: Orquestador/IA, ETA Q2 2026)**\n   - Consolidar workflows IA (Flujo 16) con etiquetado y borradores state=draft.\n   - Journeys multicanal (email + push + WhatsApp) y timeline conversacional.\n   - Sincronizar preferencias de notificaciones (Flujo 12) con auto-respuestas.\n5. **Testing y QA (Owner: QA Guild, continuo)**\n   - Actualizar suites Cypress/Vitest para Inbox, comentarios, agenda, feedback y programados.\n   - Automatizar pruebas de alias/onboarding y fallback Mailgun.\n   - A√±adir cobertura para emailTrashRetention, webhooks de rebote y m√©tricas.\n\nMantener esta lista viva antes de iniciar nuevas implementaciones en Flujo 7.",
      "checklistSection": "- **Variables de entorno front/back:**\n  - `VITE_BACKEND_BASE_URL` (si hay API Gateway), `VITE_ENABLE_EMAIL_ANALYZE` (`1` para permitir `/api/email-insights/analyze`), `VITE_ENABLE_DIRECT_OPENAI`, `VITE_OPENAI_API_KEY`, `VITE_OPENAI_PROJECT_ID` para funciones IA.\n  - `VITE_MAILGUN_DOMAIN` y `VITE_FIREBASE_FUNCTIONS_URL` (`mailgunService` / `MailgunTester`).\n  - `VITE_ENABLE_AI_SUPPLIERS` para b√∫squeda IA de proveedores.\n- **Firestore/Cloud Functions:**\n  - Colecciones: `emailUsernames`, `users`, `emailMetrics` (+ subcolecci√≥n `daily`), `users/{uid}/mails` (si se usa fallback), `mails` (global).\n  - Reglas de seguridad que permitan leer/escribir `emailUsernames`, `emailMetrics`, `users/{uid}/mails` y evitar filtraciones cross-user.\n  - Funci√≥n (cron) o job que invoque `processScheduledEmails(sendMail)` peri√≥dicamente en el backend para habilitar programaciones.\n  - Webhooks Mailgun (inbound/outbound) si se habilita backend.\n- **Frontend:** exponer data-testids alineados con Cypress, asegurar que `UnifiedInbox` reemplaza completamente al legacy y limpiar scripts/estilos duplicados antes de release.",
      "e2eSection": "- `cypress/e2e/email/send-email.cy.js y cypress/e2e/email/read-email.cy.js`: comprueban env√≠o, recepci√≥n y lectura de correos desde la bandeja unificada.\n- `cypress/e2e/email/folders-management.cy.js y cypress/e2e/email/tags-filters.cy.js`: verifican organizaci√≥n por carpetas, etiquetas y filtros avanzados.\n- `cypress/e2e/email/smart-composer.cy.js, cypress/e2e/email/ai-provider-email.cy.js y cypress/e2e/compose_quick_replies.cy.js`: prueban generaci√≥n asistida por IA y respuestas r√°pidas.\n- `cypress/e2e/email_inbox_smoke.cy.js`: smoke integral de la bandeja y sincronizaci√≥n en tiempo real.\n- `cypress/e2e/email/read-email-attachments.cy.js`: asegura descarga y previsualizaci√≥n de adjuntos.\n- `cypress/e2e/email/read-email-list.cy.js`: verifica paginaci√≥n y ordenaci√≥n del listado principal.\n- `cypress/e2e/email/read-email-open.cy.js`: comprueba estados de lectura y m√©tricas asociadas.\n- `cypress/e2e/email/read-email-unread-status.cy.js`: valida cambios de estado le√≠do/no le√≠do en lista y detalle.\n- `cypress/e2e/email/send-email-attachment.cy.js`: cubre adjuntos en env√≠os salientes y almacenamiento temporal.\n- `cypress/e2e/email/send-email-validation.cy.js`: revisa validaciones de formulario (destinatarios, asunto, cuerpo) antes de enviar.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/email/send-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/folders-management.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/tags-filters.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/smart-composer.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/ai-provider-email.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/compose_quick_replies.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email_inbox_smoke.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email-attachments.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email-list.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email-open.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/read-email-unread-status.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/send-email-attachment.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/email/send-email-validation.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-8-diseno-web-personalizacion.md",
      "title": "8. Diseno Web y Personalizacion (estado 2025-10-08)",
      "implementedLines": [],
      "pendingLines": [
        "mover la llamada a OpenAI al backend (evitar exponer `VITE_OPENAI_API_KEY`), corregir el guard de publicacion (`ProfileSummary`/`publishDisabled`), habilitar biblioteca de prompts editable, exponer configuracion de dominio personalizado y superficie de analitica consumible."
      ],
      "roadmapSection": "- Editor de prompts avanzado (CRUD, versionado, biblioteca compartida por rol).  \n- Refactor de generacion IA: mover a backend/`AIWebGenerator` con streaming seguro, quotas y manejo centralizado de errores.  \n- Historial enriquecido: diffs, etiquetas, undo/redo y soporte de borradores previos a publicar.  \n- Analitica integrada (dashboard, alertas) sobre `analytics/websiteEvents` + tracking de visitas publicas.  \n- Dominio personalizado y SEO avanzado (metatags dinamicos, sitemap, OG images, fallback offline).  \n- Colaboracion multirol (comentarios, sugerencias, aprobaciones con permisos granulares).",
      "checklistSection": "- Definir `OPENAI_API_KEY`, `VITE_ENABLE_DIRECT_OPENAI`, `VITE_OPENAI_PROJECT_ID` y modelo antes de habilitar IA directa.  \n- Configurar hosting/CDN para publicar `weddings/{id}/publicSite/site` y limpiar cache tras cada publish.  \n- Revisar consentimiento de datos publicos y clausulas de privacidad.  \n- Validar peso total del HTML + assets (< 2 MB recomendado).  \n- Preparar rollbacks en caso de fallo del backend `/api/public/weddings/:id/publish`.",
      "e2eSection": "- `cypress/e2e/web/diseno-web-flow.cy.js`: recorre el generador de sitio, personalizaci√≥n de secciones y publicaci√≥n.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/web/diseno-web-flow.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-9-rsvp-confirmaciones.md",
      "title": "9. RSVP y Confirmaciones (estado 2025-10-07)",
      "implementedLines": [
        "`RSVPConfirm.jsx`, `AcceptInvitation.jsx`, `RSVPDashboard.jsx`, hooks `useGuests`, servicios `rsvpService.js` y `emailAutomationService.js`."
      ],
      "pendingLines": [
        "confirmaciones grupales avanzadas, recordatorios automaticos multi-canal, analytics detallados y integracion directa con catering."
      ],
      "roadmapSection": "- Confirmaciones grupales mas flexibles (familias, corporate) con panel dedicado.\n- Recordatorios multi-canal autom√°ticos y programacion inteligente por segmentos.\n- Tablero de analytics con conversion por canal y motivos de declinacion.\n- Integracion directa con proveedores de catering para menus y alergias.\n- Automatizar mensajes de follow-up tras la boda (agradecimientos).",
      "checklistSection": "- Reglas Firestore para colecciones `rsvp`, `rsvpLogs`, `invitations` con seguridad por rol.\n- Configurar `MAILGUN_*`, `WHATSAPP_PROVIDER` (si aplica) y plantillas de email con enlaces tracking.\n- Revisar copy y traducciones para formulario y estados.\n- Validar expiraciones de token y reintentos en ambientes de staging.",
      "e2eSection": "- `cypress/e2e/rsvp/rsvp_confirm_by_token.cy.js, cypress/e2e/rsvp/rsvp_invalid_token.cy.js y cypress/e2e/rsvp/rsvp_reminders.cy.js`: prueban confirmaciones por enlace, manejo de tokens inv√°lidos y recordatorios automatizados.\n- `cypress/e2e/rsvp/rsvp_confirm.cy.js y cypress/e2e/invitaciones_rsvp.cy.js`: validan la experiencia completa de RSVP y env√≠o de invitaciones digitales.\n\n- `cypress/e2e/rsvp_confirm.cy.js`: smoke legacy del flujo corto `/rsvp/:token` para compatibilidad.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/rsvp/rsvp_confirm_by_token.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/rsvp/rsvp_invalid_token.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/rsvp/rsvp_reminders.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/rsvp/rsvp_confirm.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/invitaciones_rsvp.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/rsvp_confirm.cy.js",
          "exists": false
        }
      ],
      "implChecks": [
        {
          "ref": "RSVPConfirm.jsx",
          "basename": "RSVPConfirm.jsx",
          "matches": [
            "apps/main-app/src/pages/RSVPConfirm.jsx"
          ]
        },
        {
          "ref": "AcceptInvitation.jsx",
          "basename": "AcceptInvitation.jsx",
          "matches": [
            "apps/main-app/src/pages/AcceptInvitation.jsx"
          ]
        },
        {
          "ref": "RSVPDashboard.jsx",
          "basename": "RSVPDashboard.jsx",
          "matches": [
            "apps/main-app/src/pages/RSVPDashboard.jsx"
          ]
        },
        {
          "ref": "useGuests",
          "basename": "useGuests",
          "matches": [
            "apps/main-app/src/hooks/useGuests.js"
          ]
        },
        {
          "ref": "rsvpService.js",
          "basename": "rsvpService.js",
          "matches": [
            "apps/main-app/src/services/rsvpService.js"
          ]
        },
        {
          "ref": "emailAutomationService.js",
          "basename": "emailAutomationService.js",
          "matches": [
            "apps/main-app/src/services/emailAutomationService.js"
          ]
        }
      ],
      "conclusion": "parcial"
    },
    {
      "filePath": "docs/flujos-especificos/flujo-13-seating-plan-e2e.md",
      "title": "Flujo 13: E2E del Seating Plan",
      "implementedLines": [],
      "pendingLines": [],
      "roadmapSection": "- Integraci√≥n en pipeline de CI y reporte autom√°tico\n\n### 3) seating_toasts.cy.js (Toasts)\nValida que:\n- Guardar ‚ÄúConfigurar Espacio‚Äù muestra toast ‚ÄúDimensiones guardadas‚Äù.\n- Ejecutar ‚ÄúAuto IA‚Äù muestra un toast de √©xito o de error (ambos caminos v√°lidos seg√∫n disponibilidad del backend).\n\nLos toasts se gestionan en `src/components/seating/SeatingPlanRefactored.jsx` con `react-toastify`.",
      "checklistSection": "",
      "e2eSection": "- `cypress/e2e/seating/seating_smoke.cy.js` y `cypress/e2e/seating/seating_assign_unassign.cy.js`: validan creaci√≥n de salones, asignaci√≥n y desasignaci√≥n de invitados.\n- `cypress/e2e/seating/seating_capacity_limit.cy.js`, `cypress/e2e/seating/seating_no_overlap.cy.js` y `cypress/e2e/seating/seating_obstacles_no_overlap.cy.js`: cubren reglas de capacidad, colisiones y obst√©culos.\n- `cypress/e2e/seating/seating_template_circular.cy.js`, `cypress/e2e/seating/seating_template_u_l_imperial.cy.js` y `cypress/e2e/seating/seating_ceremony.cy.js`: ejercitan plantillas y configuraciones especiales.\n- `cypress/e2e/seating/seating_fit.cy.js`, `cypress/e2e/seating/seating_aisle_min.cy.js` y `cypress/e2e/seating/seating_toasts.cy.js`: prueban distribuci√≥n autom√°tica, pasillos m√≠nimos y flujos de brindis.\n- `cypress/e2e/seating/seating_auto_ai.cy.js`, `cypress/e2e/seating/seating_area_type.cy.js` y `cypress/e2e/seating/seating_delete_duplicate.cy.js`: cubren auto-IA, tipos de √°reas y deduplicaci√≥n.\n- `cypress/e2e/seating/seating-content-flow.cy.js`: confirma disponibilidad de contenidos auxiliares vinculados con Momentos.\n- `cypress/e2e/seating/seating-basic.cy.js`, `cypress/e2e/seating/seating-conflicts.cy.js` y `cypress/e2e/seating/seating_ui_panels.cy.js`: smoke b√∫sico, resoluci√≥n de conflictos y paneles secundarios.\n- `cypress/e2e/seating/seating-export.cy.js`: valida exportaciones PDF/Excel.",
      "e2eChecks": [
        {
          "spec": "cypress/e2e/seating/seating_smoke.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_assign_unassign.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_capacity_limit.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_no_overlap.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_obstacles_no_overlap.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_template_circular.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_template_u_l_imperial.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_ceremony.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_fit.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_aisle_min.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_toasts.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_auto_ai.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_area_type.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_delete_duplicate.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating-content-flow.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating-basic.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating-conflicts.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating_ui_panels.cy.js",
          "exists": false
        },
        {
          "spec": "cypress/e2e/seating/seating-export.cy.js",
          "exists": false
        }
      ],
      "implChecks": [],
      "conclusion": "pendiente"
    }
  ]
}
