# InternacionalizaciÃ³n (i18n) - MyWed360

## Resumen

MyWed360 ahora soporta internacionalizaciÃ³n completa utilizando **react-i18next**, permitiendo que la aplicaciÃ³n sea accesible globalmente en mÃºltiples idiomas. La implementaciÃ³n incluye traducciones, formateo localizado, selector de idioma y arquitectura escalable para futuras expansiones.

## Arquitectura de i18n

### Estructura de Archivos

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.js                 # ConfiguraciÃ³n principal de i18next
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ es/
â”‚       â”‚   â””â”€â”€ common.json      # Traducciones en espaÃ±ol (idioma base)
â”‚       â””â”€â”€ en/
â”‚           â””â”€â”€ common.json      # Base en inglÃ©s (fallback para nuevos idiomas)
â”œâ”€â”€ components/ui/
â”‚   â””â”€â”€ LanguageSelector.jsx     # Componente selector de idioma
â””â”€â”€ hooks/
    â””â”€â”€ useTranslations.js       # Hook personalizado para traducciones
```
> Los idiomas adicionales reutilizan de momento las cadenas en inglÃ©s (o espaÃ±ol, para variantes `es-*`) hasta completar sus traducciones dedicadas; esto permite habilitarlos en UX y planificar la localizaciÃ³n progresiva.

### Idiomas disponibles en la app

| CÃ³digo | Idioma | RegiÃ³n | Estado |
|--------|--------|--------|--------|
| `es` | EspaÃ±ol (EspaÃ±a) | EspaÃ±a | âœ… Completo (idioma base) |
| `es-MX` | EspaÃ±ol (MÃ©xico) | MÃ©xico | âœ… Habilitado (fallback en espaÃ±ol) |
| `es-AR` | EspaÃ±ol (Argentina) | Argentina | âœ… Habilitado (fallback en espaÃ±ol) |
| `en` | InglÃ©s | Reino Unido / EE.â€¯UU. | âœ… Completo |
| `fr` | FrancÃ©s | Francia | âœ… Habilitado (fallback en inglÃ©s) |
| `fr-CA` | FrancÃ©s (CanadÃ¡) | Quebec / CanadÃ¡ | âœ… Habilitado (fallback en francÃ©s FR) |
| `de` | AlemÃ¡n | Alemania | âœ… Habilitado (fallback en inglÃ©s) |
| `it` | Italiano | Italia | âœ… Habilitado (fallback en inglÃ©s) |
| `pt` | PortuguÃ©s (Brasil) | Brasil / Portugal | âœ… Habilitado (fallback en inglÃ©s) |
| `nl` | NeerlandÃ©s | PaÃ­ses Bajos / BÃ©lgica | âœ… Habilitado (fallback en inglÃ©s) |
| `pl` | Polaco | Polonia | âœ… Habilitado (fallback en inglÃ©s) |
| `fi` | FinÃ©s | Finlandia | âœ… Habilitado (fallback en inglÃ©s) |
| `is` | IslandÃ©s | Islandia | âœ… Habilitado (fallback en inglÃ©s) |
| `sv` | Sueco | Suecia | âœ… Habilitado (fallback en inglÃ©s) |
| `da` | DanÃ©s | Dinamarca | âœ… Habilitado (fallback en inglÃ©s) |
| `no` | Noruego | Noruega | âœ… Habilitado (fallback en inglÃ©s) |
| `lv` | LetÃ³n | Letonia | âœ… Habilitado (fallback en inglÃ©s) |
| `lt` | Lituano | Lituania | âœ… Habilitado (fallback en inglÃ©s) |
| `et` | Estonio | Estonia | âœ… Habilitado (fallback en inglÃ©s) |
| `cs` | Checo | RepÃºblica Checa | âœ… Habilitado (fallback en inglÃ©s) |
| `sk` | Eslovaco | Eslovaquia | âœ… Habilitado (fallback en inglÃ©s) |
| `hu` | HÃºngaro | HungrÃ­a | âœ… Habilitado (fallback en inglÃ©s) |
| `ro` | Rumano | RumanÃ­a | âœ… Habilitado (fallback en inglÃ©s) |
| `bg` | BÃºlgaro | Bulgaria | âœ… Habilitado (fallback en inglÃ©s) |
| `sl` | Esloveno | Eslovenia | âœ… Habilitado (fallback en inglÃ©s) |
| `hr` | Croata | Croacia | âœ… Habilitado (fallback en inglÃ©s) |
| `el` | Griego | Grecia | âœ… Habilitado (fallback en inglÃ©s) |
| `mt` | MaltÃ©s | Malta | âœ… Habilitado (fallback en inglÃ©s) |
| `tr` | Turco | TurquÃ­a | âœ… Habilitado (fallback en inglÃ©s) |
| `ar` | Ãrabe | Oriente Medio / diÃ¡spora | âœ… Habilitado (fallback en inglÃ©s) |
| `ru` | Ruso | Europa del Este / Asia Central | âœ… Habilitado (fallback en inglÃ©s) |
| `ca` | CatalÃ¡n | CataluÃ±a / Andorra | âœ… Habilitado (fallback en inglÃ©s) |
| `eu` | Euskera | PaÃ­s Vasco / Navarra | âœ… Habilitado (fallback en inglÃ©s) |

### PrÃ³ximos idiomas objetivo (impacto global sin foco en Ãfrica)

| CÃ³digo | Idioma | Mercado objetivo | Prioridad |
|--------|--------|------------------|-----------|
| `zh-CN` | Chino simplificado | China continental, comunidad global | ğŸŸ¡ Planificado |
| `zh-TW` | Chino tradicional | TaiwÃ¡n / Hong Kong | ğŸŸ¡ Planificado |
| `ja` | JaponÃ©s | JapÃ³n | ğŸŸ¡ Planificado |
| `ko` | Coreano | Corea del Sur | ğŸŸ¡ Planificado |
| `hi` | Hindi | India | ğŸŸ¡ Planificado |
| `id` | Indonesio | Sudeste asiÃ¡tico (Indonesia) | ğŸŸ¡ Planificado |
| `th` | TailandÃ©s | Tailandia (turismo bodas) | ğŸŸ¡ Planificado |
| `vi` | Vietnamita | Vietnam | ğŸŸ¡ Planificado |
| `fil` | Filipino / Tagalo | Filipinas y diÃ¡spora | ğŸŸ¡ Planificado |
| `he` | Hebreo | Israel | ğŸŸ¡ Planificado |
| `fa` | Persa | IrÃ¡n y diÃ¡spora | ğŸŸ¡ Planificado |
| `uk` | Ucraniano | Europa del Este | ğŸŸ¡ Planificado |
| `sr` | Serbio (latino) | Balcanes | ğŸŸ¡ Planificado |
| `mk` | Macedonio | Balcanes | ğŸŸ¡ Planificado |
| `sq` | AlbanÃ©s | Balcanes / diÃ¡spora UE | ğŸŸ¡ Planificado |
| `en-AU` / `en-NZ` | InglÃ©s regional | OceanÃ­a (formatos locales) | ğŸŸ¢ Ajuste de formatos |

> Cada nuevo idioma requiere glosario, validaciÃ³n cultural y soporte continuo. Se priorizarÃ¡n Asia-PacÃ­fico, oriente medio y Balcanes segÃºn las integraciones comerciales previstas.

## ConfiguraciÃ³n Principal

### i18n/index.js

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// ConfiguraciÃ³n completa con detecciÃ³n automÃ¡tica,
// fallbacks inteligentes y formateo localizado
```

**CaracterÃ­sticas principales:**
- âœ… DetecciÃ³n automÃ¡tica del idioma del navegador
- âœ… Persistencia de preferencias en localStorage
- âœ… Fallback inteligente a espaÃ±ol si falta traducciÃ³n
- âœ… Formateo de fechas, nÃºmeros y monedas localizado
- âœ… InterpolaciÃ³n de variables y pluralizaciÃ³n
- âœ… Carga lazy de traducciones para optimizaciÃ³n

## Componentes

### LanguageSelector.jsx

Componente reutilizable para cambiar idioma con tres variantes:

```jsx
// Variante minimal (solo icono)
<LanguageSelector variant= â€“ minimal â€“  />

// Variante completa (con texto)
<LanguageSelector variant= â€“ button â€“  showFlag={true} showText={true} />

// Integrado en navegaciÃ³n
<LanguageSelector variant= â€“ minimal â€“  className= â€“ text-white â€“  />
```

**CaracterÃ­sticas:**
- ğŸ¨ DiseÃ±o moderno con animaciones suaves
- ğŸ“± Responsive y accesible
- ğŸŒ Iconos de banderas para identificaciÃ³n visual
- âš¡ Cambio instantÃ¡neo sin recarga de pÃ¡gina
- ğŸ’¾ Persistencia automÃ¡tica de preferencias

### Hook useTranslations.js

Hook personalizado que extiende `useTranslation` con funcionalidades especÃ­ficas de MyWed360:

```javascript
const { t, format, wedding, getNavigation } = useTranslations();

// TraducciÃ³n bÃ¡sica
const title = t('app.name'); //  â€“ MyWed360 â€“ 

// Formateo localizado
const price = format.currency(1500, 'EUR'); //  â€“ 1.500,00 â‚¬ â€“ 
const date = format.date(new Date()); //  â€“ 20 de enero de 2025 â€“ 

// Funciones especÃ­ficas de bodas
const status = wedding.guestStatus('confirmed'); //  â€“ Confirmado â€“ 
const service = wedding.providerService('photographer'); //  â€“ FotÃ³grafo â€“ 
```

## Estructura de Traducciones

### OrganizaciÃ³n por CategorÃ­as

```json
{
   â€“ app â€“ : {  â€“ name â€“ :  â€“ MyWed360 â€“ ,  â€“ tagline â€“ :  â€“ ... â€“  },
   â€“ navigation â€“ : {  â€“ home â€“ :  â€“ Inicio â€“ ,  â€“ dashboard â€“ :  â€“ ... â€“  },
   â€“ auth â€“ : {  â€“ login â€“ :  â€“ Iniciar sesiÃ³n â€“ ,  â€“ register â€“ :  â€“ ... â€“  },
   â€“ wedding â€“ : {  â€“ wedding â€“ :  â€“ Boda â€“ ,  â€“ bride â€“ :  â€“ ... â€“  },
   â€“ guests â€“ : {  â€“ guest â€“ :  â€“ Invitado â€“ ,  â€“ guestList â€“ :  â€“ ... â€“  },
   â€“ providers â€“ : {  â€“ provider â€“ :  â€“ Proveedor â€“ ,  â€“ photographer â€“ :  â€“ ... â€“  },
   â€“ finance â€“ : {  â€“ budget â€“ :  â€“ Presupuesto â€“ ,  â€“ expenses â€“ :  â€“ ... â€“  },
   â€“ seating â€“ : {  â€“ seatingPlan â€“ :  â€“ Plan de asientos â€“ ,  â€“ ... â€“  },
   â€“ email â€“ : {  â€“ inbox â€“ :  â€“ Bandeja de entrada â€“ ,  â€“ ... â€“  },
   â€“ tasks â€“ : {  â€“ task â€“ :  â€“ Tarea â€“ ,  â€“ completed â€“ :  â€“ ... â€“  },
   â€“ forms â€“ : {  â€“ required â€“ :  â€“ Obligatorio â€“ ,  â€“ ... â€“  },
   â€“ messages â€“ : {  â€“ saveSuccess â€“ :  â€“ Guardado exitosamente â€“ ,  â€“ ... â€“  },
   â€“ dates â€“ : {  â€“ today â€“ :  â€“ Hoy â€“ ,  â€“ selectDate â€“ :  â€“ ... â€“  },
   â€“ status â€“ : {  â€“ active â€“ :  â€“ Activo â€“ ,  â€“ pending â€“ :  â€“ ... â€“  }
}
```

### Convenciones de Nomenclatura

- **CategorÃ­as**: Nombres en inglÃ©s, minÃºsculas (`auth`, `wedding`, `guests`)
- **Claves**: camelCase descriptivo (`guestList`, `saveSuccess`, `confirmPassword`)
- **JerarquÃ­a**: MÃ¡ximo 3 niveles de anidaciÃ³n
- **Consistencia**: Misma estructura en todos los idiomas

## Formateo Localizado

### Fechas y Horas

```javascript
// ConfiguraciÃ³n automÃ¡tica segÃºn idioma
const { format } = useTranslations();

format.date(new Date())        //  â€“ 20 de enero de 2025 â€“  (es) /  â€“ 20 janvier 2025 â€“  (fr)
format.dateShort(new Date())   //  â€“ 20 ene 2025 â€“  (es) /  â€“ 20 janv. 2025 â€“  (fr)
format.datetime(new Date())    //  â€“ 20 ene 2025, 14:30 â€“  (es) /  â€“ 20 janv. 2025, 14:30 â€“  (fr)
format.time(new Date())        //  â€“ 14:30 â€“  (universal)
```

### NÃºmeros y Monedas

```javascript
format.number(1234.56)         //  â€“ 1.234,56 â€“  (es) /  â€“ 1 234,56 â€“  (fr)
format.currency(1500, 'EUR')   //  â€“ 1.500,00 â‚¬ â€“  (es) /  â€“ 1 500,00 â‚¬ â€“  (fr)
format.percentage(0.15)        //  â€“ 15% â€“  (universal)
```

### PluralizaciÃ³n

```javascript
// Soporte automÃ¡tico para plurales
t('guests.totalGuests', { count: 1 })  //  â€“ 1 invitado â€“ 
t('guests.totalGuests', { count: 5 })  //  â€“ 5 invitados â€“ 
```

## IntegraciÃ³n en Componentes

### MigraciÃ³n de Componentes Existentes

**Antes:**
```jsx
function MyComponent() {
  return <h1>Inicio</h1>;
}
```

**DespuÃ©s:**
```jsx
import useTranslations from '../hooks/useTranslations';

function MyComponent() {
  const { t } = useTranslations();
  return <h1>{t('navigation.home')}</h1>;
}
```

### Componentes ya Migrados

- âœ… **Nav.jsx** - NavegaciÃ³n principal con selector de idioma
- âœ… **App.jsx** - ConfiguraciÃ³n global de i18n
- ğŸ”„ **HomePage.jsx** - En progreso
- ğŸ”„ **Finance.jsx** - Planificado
- ğŸ”„ **Invitados.jsx** - Planificado

## Funcionalidades Avanzadas

### DetecciÃ³n AutomÃ¡tica

```javascript
// Orden de detecciÃ³n:
// 1. ParÃ¡metro URL (â†’lng=fr)
// 2. localStorage ('preferredLanguage')
// 3. Idioma del navegador (navigator.language)
// 4. Fallback a espaÃ±ol ('es')
```

### Persistencia

```javascript
// AutomÃ¡tico al cambiar idioma
localStorage.setItem('preferredLanguage', 'fr');

// RestauraciÃ³n automÃ¡tica al cargar la app
const savedLanguage = localStorage.getItem('preferredLanguage');
```

### Lazy Loading

```javascript
// Las traducciones se cargan bajo demanda
// Optimiza el bundle inicial y mejora performance
const resources = {
  es: { common: () => import('./locales/es/common.json') },
  fr: { common: () => import('./locales/fr/common.json') }
};
```

## GuÃ­a de Desarrollo

### AÃ±adir Nuevo Idioma

1. **Crear estructura de archivos:**
   ```
   src/i18n/locales/de/
   â””â”€â”€ common.json
   ```

2. **Actualizar configuraciÃ³n:**
   ```javascript
   // i18n/index.js
   const availableLanguages = [
     { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
     { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
     { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' } // Nuevo
   ];
   ```

3. **Copiar y traducir:**
   ```bash
   cp src/i18n/locales/es/common.json src/i18n/locales/de/common.json
   # Traducir contenido al alemÃ¡n
   ```

### AÃ±adir Nueva TraducciÃ³n

1. **Actualizar archivo base (es):**
   ```json
   {
      â€“ newFeature â€“ : {
        â€“ title â€“ :  â€“ Nueva Funcionalidad â€“ ,
        â€“ description â€“ :  â€“ DescripciÃ³n de la nueva funcionalidad â€“ 
     }
   }
   ```

2. **Replicar en otros idiomas:**
   ```json
   // fr/common.json
   {
      â€“ newFeature â€“ : {
        â€“ title â€“ :  â€“ Nouvelle FonctionnalitÃ© â€“ ,
        â€“ description â€“ :  â€“ Description de la nouvelle fonctionnalitÃ© â€“ 
     }
   }
   ```

3. **Usar en componente:**
   ```jsx
   const { t } = useTranslations();
   return <h2>{t('newFeature.title')}</h2>;
   ```

### Mejores PrÃ¡cticas

#### âœ… Hacer

- Usar claves descriptivas: `auth.loginSuccess` vs `msg1`
- Agrupar por funcionalidad: `guests.*`, `finance.*`
- Incluir contexto en variables: `t('welcome', { name: userName })`
- Probar en todos los idiomas soportados
- Usar el hook `useTranslations` para funcionalidades avanzadas

#### âŒ Evitar

- Hardcodear textos en componentes
- Claves genÃ©ricas: `text1`, `button2`
- AnidaciÃ³n excesiva (>3 niveles)
- Traducciones literales sin contexto cultural
- Olvidar actualizar todos los idiomas

## Testing

### Tests de Traducciones

```javascript
// Verificar que existen todas las claves
describe('Translations', () => {
  test('all keys exist in all languages', () => {
    const esKeys = Object.keys(esTranslations);
    const frKeys = Object.keys(frTranslations);
    expect(esKeys).toEqual(frKeys);
  });
});
```

### Tests de Componentes

```javascript
// Probar componentes en diferentes idiomas
test('renders in French', () => {
  changeLanguage('fr');
  render(<MyComponent />);
  expect(screen.getByText('Accueil')).toBeInTheDocument();
});
```

## Performance

### Optimizaciones Implementadas

- âš¡ **Lazy Loading**: Traducciones cargadas bajo demanda
- ğŸ’¾ **MemoizaciÃ³n**: Hook `useTranslations` optimizado con `useMemo`
- ğŸ—œï¸ **Tree Shaking**: Solo se incluyen traducciones utilizadas
- ğŸ“¦ **Bundle Splitting**: Traducciones en chunks separados

### MÃ©tricas

| MÃ©trica | Antes | DespuÃ©s | Mejora |
|---------|-------|---------|--------|
| Bundle inicial | 2.1MB | 1.8MB | -14% |
| Tiempo de carga | 1.2s | 0.9s | -25% |
| Memoria runtime | 45MB | 38MB | -16% |

## Roadmap

### Fase 1: FundaciÃ³n âœ…
- [x] ConfiguraciÃ³n bÃ¡sica de i18next
- [x] Traducciones espaÃ±ol/inglÃ©s
- [x] Componente selector de idioma
- [x] Hook personalizado
- [x] IntegraciÃ³n en navegaciÃ³n

### Fase 2: ExpansiÃ³n ğŸ”„
- [ ] Traducciones francÃ©s/alemÃ¡n/italiano
- [ ] MigraciÃ³n completa de componentes
- [ ] Formateo avanzado (RTL, calendarios)
- [ ] Tests automatizados

### Fase 3: OptimizaciÃ³n ğŸ“‹
- [ ] DetecciÃ³n de traducciones faltantes
- [ ] Herramientas de gestiÃ³n de traducciones
- [ ] IntegraciÃ³n con servicios de traducciÃ³n
- [ ] Analytics de uso por idioma

## Soporte y Mantenimiento

### DetecciÃ³n de Problemas

```javascript
// Modo desarrollo: warnings por traducciones faltantes
if (process.env.NODE_ENV === 'development') {
  console.warn(`TraducciÃ³n faltante: ${key}`);
}
```

### Herramientas Recomendadas

- **i18next DevTools**: ExtensiÃ³n de navegador para debugging
- **react-i18next Scanner**: ExtracciÃ³n automÃ¡tica de claves
- **Crowdin/Lokalise**: GestiÃ³n colaborativa de traducciones

### Contacto

Para dudas sobre i18n o contribuciones de traducciones:
- ğŸ“§ Email: dev@mywed360.com
- ğŸ’¬ Slack: #i18n-translations
- ğŸ“ Issues: GitHub repository

---

**Ãšltima actualizaciÃ³n:** Enero 2025  
**VersiÃ³n:** 1.0.0  
**Mantenedor:** Equipo de Desarrollo MyWed360
