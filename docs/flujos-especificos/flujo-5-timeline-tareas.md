# 5. Flujo de Timeline y Gestión de Tareas (Detallado)

## Diferenciación: Momentos de Boda vs Tareas/Eventos

### Momentos de la Boda (Día D)
- Ceremonia, cóctel, banquete, fiesta
- Ocurren el día de la boda
- Tienen ubicación, horario, duración
- Se configuran en  – Configuración de Boda – 

### Tareas/Eventos (Preparación)
- Reuniones, citas, tareas por hacer
- Ocurren ANTES del día de la boda
- Tienen fechas límite, responsables, estado
- Se gestionan en  – Timeline y Tareas – 

## 5.1 Creación de Timeline de Preparación
**Objetivo:** Organizar todas las tareas necesarias antes de la boda

### Timeline Automático Generado por IA
**Pasos detallados:**
- [ ] **Generación basada en fecha de boda**
  - IA calcula timeline óptimo según fecha
  - 12 meses antes: tareas básicas (lugar, fecha)
  - 9 meses antes: proveedores principales
  - 6 meses antes: invitaciones, detalles
  - 3 meses antes: confirmaciones finales
  - 1 mes antes: últimos detalles

- [ ] **Personalización según tipo de boda**
  - Boda religiosa: añade tareas específicas (cursos, documentos)
  - Boda civil: simplifica trámites
  - Boda destino: añade logística de viaje
  - Boda grande (>150): más tiempo para organización

- [ ] **Tareas predefinidas por categoría**
  - **Documentación:** Certificados, permisos
  - **Proveedores:** Contratar fotógrafo, catering, música
  - **Invitados:** Lista, invitaciones, confirmaciones
  - **Vestimenta:** Pruebas de vestido, traje, accesorios
  - **Detalles:** Flores, decoración, detalles para invitados
  - **Logística:** Transporte, alojamiento, coordinación

### Tareas Personalizadas
**Pasos detallados:**
- [ ] **Crear tarea manual**
  - Título y descripción
  - Fecha límite
  - Prioridad (alta, media, baja)
  - Categoría (dropdown personalizable)
  - Responsable (novio/a, pareja, familia, proveedor)

- [ ] **Subtareas y dependencias**
  - Dividir tareas grandes en subtareas
  - Establecer dependencias (X debe completarse antes que Y)
  - Progreso automático basado en subtareas
  - Alertas de bloqueos por dependencias

- [ ] **Recordatorios y notificaciones**
  - Email automático X días antes
  - Notificaciones push en app
  - SMS para tareas críticas
  - Escalado si no se completa a tiempo

## 5.2 Gestión de Reuniones y Citas
**Objetivo:** Coordinar todas las citas necesarias con proveedores y familia

### Programación de Citas
**Pasos detallados:**
- [ ] **Tipos de citas**
  - **Proveedores:** Fotógrafo, catering, floristería
  - **Vestimenta:** Pruebas de vestido, sastre
  - **Venue:** Visitas a lugares, reuniones de coordinación
  - **Familia:** Reuniones de planificación, degustaciones
  - **Oficiales:** Trámites civiles, religiosos

- [ ] **Integración con calendarios**
  - Sincronización con Google Calendar
  - Invitaciones automáticas a participantes
  - Recordatorios previos a la cita
  - Reprogramación con notificaciones

- [ ] **Preparación de citas**
  - Lista de preguntas sugeridas por IA
  - Documentos necesarios para llevar
  - Presupuesto asignado para la reunión
  - Notas de citas anteriores con mismo proveedor

### Seguimiento Post-Cita
**Pasos detallados:**
- [ ] **Registro de resultados**
  - Notas de la reunión
  - Decisiones tomadas
  - Presupuestos recibidos
  - Próximos pasos acordados

- [ ] **Evaluación de proveedores**
  - Puntuación de 1-5 estrellas
  - Pros y contras
  - Comparación con otros proveedores
  - Recomendación de IA basada en criterios

- [ ] **Acciones de seguimiento**
  - Tareas automáticas generadas
  - Recordatorios de decisiones pendientes
  - Programación de siguientes citas
  - Actualización de presupuesto

## 5.3 Hitos Importantes
**Objetivo:** Marcar fechas clave que no se pueden mover

### Hitos Automáticos
**Pasos detallados:**
- [ ] **Hitos legales/religiosos**
  - Fecha límite para documentos civiles
  - Cursos prematrimoniales (si aplica)
  - Reserva definitiva de lugar
  - Fecha límite para cambios de menú

- [ ] **Hitos de proveedores**
  - Fecha límite para contratar fotógrafo
  - Último día para cambios en catering
  - Fecha de entrega de invitaciones
  - Prueba final de vestido

- [ ] **Hitos personales**
  - Despedidas de soltero/a
  - Última cita de belleza
  - Ensayo de ceremonia
  - Entrega de detalles a invitados

### Alertas de Hitos Críticos
**Pasos detallados:**
- [ ] **Sistema de alertas escalonadas**
  - 30 días antes: primera alerta
  - 15 días antes: alerta urgente
  - 7 días antes: alerta crítica
  - 1 día antes: alerta final

- [ ] **Escalado automático**
  - Si no se completa, notificar a pareja
  - Sugerir alternativas o soluciones
  - Contactar con proveedores si es necesario
  - Generar plan de contingencia

## 5.4 Asignación de Responsables
**Objetivo:** Distribuir tareas entre novios, familia y proveedores

### Matriz de Responsabilidades
**Pasos detallados:**
- [ ] **Roles predefinidos**
  - **Novio/a principal:** Decisiones finales, presupuesto
  - **Pareja:** Tareas compartidas, segunda opinión
  - **Madre novia:** Tradiciones, protocolo familiar
  - **Padre novio:** Logística, transporte
  - **Wedding planner:** Coordinación general
  - **Proveedores:** Tareas específicas de su área

- [ ] **Asignación inteligente**
  - IA sugiere responsable óptimo por tarea
  - Basado en disponibilidad y habilidades
  - Balanceo de carga de trabajo
  - Consideración de preferencias personales

- [ ] **Delegación y seguimiento**
  - Notificaciones automáticas al asignar
  - Dashboard de tareas por persona
  - Recordatorios personalizados
  - Reportes de progreso por responsable

### Coordinación Familiar
**Pasos detallados:**
- [ ] **Permisos por rol familiar**
  - Padres: pueden ver y comentar, no editar
  - Hermanos: tareas específicas asignadas
  - Padrinos: responsabilidades tradicionales
  - Amigos cercanos: tareas de apoyo

- [ ] **Comunicación centralizada**
  - Chat grupal por tarea
  - Actualizaciones automáticas a familia
  - Votaciones para decisiones grupales
  - Archivo de decisiones tomadas

## 5.5 Mini-Tutorial IA para Timeline
**Objetivo:** Guiar al usuario en su primera visita a la sección

### Tutorial Conversacional
**Pasos detallados:**
- [ ] **Bienvenida contextual**
  -  – ¡Hola de nuevo! Veo que quieres organizar el timeline de tu boda – 
  - Análisis de datos existentes (fecha, tipo de boda)
  -  – Basándome en tu boda del [fecha], te he preparado un plan personalizado – 

- [ ] **Presentación del timeline generado**
  - Mostrar timeline automático creado
  - Explicar lógica detrás de fechas sugeridas
  - Destacar hitos críticos
  - Permitir ajustes inmediatos

- [ ] **Personalización guiada**
  -  – ¿Hay alguna tarea específica que ya tienes en mente? – 
  -  – ¿Prefieres empezar por proveedores o por invitados? – 
  -  – ¿Tienes restricciones de tiempo o fechas fijas? – 
  - Ajuste del timeline según respuestas

- [ ] **Configuración de notificaciones**
  -  – ¿Cómo prefieres que te recuerde las tareas? – 
  - Opciones: email, push, SMS, calendario
  - Frecuencia de recordatorios
  - Personas adicionales a notificar

**Estructura de datos:**
```javascript
// /weddings/{weddingId}/tasks/{taskId}
{
  id:  – task_001 – ,
  title:  – Contratar fotógrafo – ,
  description:  – Buscar y contratar fotógrafo para la boda – ,
  category:  – proveedores – ,
  priority:  – high – ,
  status:  – pending – , // pending, in_progress, completed, cancelled
  dueDate:  – 2024-03-15 – ,
  createdDate:  – 2024-01-15 – ,
  assignedTo:  – bride – ,
  estimatedHours: 8,
  dependencies: [ – task_venue_confirmed – ],
  subtasks: [
    {
      id:  – subtask_001 – ,
      title:  – Investigar fotógrafos recomendados – ,
      completed: true
    },
    {
      id:  – subtask_002 – , 
      title:  – Solicitar presupuestos – ,
      completed: false
    }
  ],
  reminders: [
    {
      type:  – email – ,
      daysBefore: 7,
      sent: false
    }
  ],
  notes:  – Presupuesto máximo: 2000€ – ,
  attachments: [ – photographer_quotes.pdf – ],
  relatedVendor:  – photographer_123 – ,
  milestone: false,
  aiGenerated: true,
  createdAt:  – 2024-01-15T10:00:00Z – 
}

// /weddings/{weddingId}/appointments/{appointmentId}
{
  id:  – appointment_001 – ,
  title:  – Cita con fotógrafo María García – ,
  type:  – vendor_meeting – ,
  vendorId:  – photographer_123 – ,
  date:  – 2024-03-20 – ,
  startTime:  – 16:00 – ,
  duration: 90, // minutos
  location: {
    name:  – Estudio María García – ,
    address:  – Calle Fotógrafo 15, Madrid – 
  },
  attendees: [
    { uid:  – bride_uid – , confirmed: true },
    { uid:  – groom_uid – , confirmed: false }
  ],
  agenda: [
     – Ver portfolio completo – ,
     – Discutir estilo de fotos – ,
     – Revisar paquetes y precios – ,
     – Confirmar disponibilidad fecha boda – 
  ],
  preparation: {
    documentsToTake: [ – wedding_info.pdf – ],
    questionsToAsk: [ – ¿Incluye álbum? – ,  – ¿Cuántas horas de cobertura? – ],
    budgetRange: { min: 1500, max: 2000 }
  },
  outcome: {
    decision:  – pending – , // confirmed, rejected, pending
    notes:  –  – ,
    followUpTasks: [],
    nextAppointment: null
  },
  createdAt:  – 2024-01-15T10:00:00Z – 
}
```

**Componentes necesarios:**
- `TimelineDashboard.jsx`
- `TaskManager.jsx`
- `AppointmentScheduler.jsx`
- `MilestoneTracker.jsx`
- `ResponsibilityMatrix.jsx`
- `TimelineTutorial.jsx`
- `AITaskGenerator.jsx`

**APIs/Servicios:**
- Calendar integration (Google, Outlook)
- Notification service (email, SMS, push)
- OpenAI para generación de tareas y sugerencias
- Reminder scheduling service
## Estado de Implementación

### Completado
- Lineamientos del flujo y estructura de tareas

### En Desarrollo
- Sincronización con componentes `Tasks.jsx` / `TasksRefactored.jsx`

### Pendiente
- Integraciones avanzadas (dependencias, recordatorios, notificaciones)
